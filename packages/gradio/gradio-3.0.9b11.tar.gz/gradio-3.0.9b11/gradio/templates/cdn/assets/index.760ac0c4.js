import{S as Ue,i as Ne,s as qe,d as O,v as ze,h as B,b,t as T,c as A,e as U,aa as Ze,l as K,g as N,r as He,w as G,k as ie,f as R,m as Ke,n as he,K as Qe,I as X,L as ge,y as me,ab as V,a as te,B as le,C as re,M as _e,D as Q,E as W,F as se,o as $,ac as ee,G as ke,ad as ve,ae as Ee,H as De,T as kt,R as et,U as vt,V as Et}from"./index.6dd03536.js";import{U as tt}from"./Upload.71ddc0fe.js";import{d as We}from"./dsv.7fe76a93.js";var Xe=Object.prototype.hasOwnProperty;function oe(o,e){var t,l;if(o===e)return!0;if(o&&e&&(t=o.constructor)===e.constructor){if(t===Date)return o.getTime()===e.getTime();if(t===RegExp)return o.toString()===e.toString();if(t===Array){if((l=o.length)===e.length)for(;l--&&oe(o[l],e[l]););return l===-1}if(!t||typeof o=="object"){l=0;for(t in o)if(Xe.call(o,t)&&++l&&!Xe.call(e,t)||!(t in e)||!oe(o[t],e[t]))return!1;return Object.keys(e).length===l}}return o!==o&&e!==e}const nt="Users/aliabid/projects/gradio/ui/packages/table/src/EditableCell.svelte";function Pe(o){let e,t,l;const r={c:function(){e=B("input"),b(e,"class","absolute outline-none inset-2 bg-transparent border-0 translate-x-px flex-1 "),b(e,"tabindex","-1"),T(e,"translate-x-px",!o[3]),T(e,"font-bold",o[3]),A(e,nt,7,1,123)},m:function(u,i){U(u,e,i),Ze(e,o[0]),o[7](e),t||(l=[K(e,"input",o[6]),K(e,"keydown",o[5],!1,!1,!1),K(e,"blur",Dt,!1,!1,!1)],t=!0)},p:function(u,i){i&1&&e.value!==u[0]&&Ze(e,u[0]),i&8&&T(e,"translate-x-px",!u[3]),i&8&&T(e,"font-bold",u[3])},d:function(u){u&&N(e),o[7](null),t=!1,He(l)}};return O("SvelteRegisterBlock",{block:r,id:Pe.name,type:"if",source:"(7:0) {#if edit}",ctx:o}),r}function Fe(o){let e,t,l,r,c,u=o[2]&&Pe(o);const i={c:function(){u&&u.c(),e=G(),t=B("span"),l=ie(o[0]),b(t,"tabindex","-1"),b(t,"role","button"),b(t,"class","p-2 outline-none border-0 flex-1"),T(t,"opacity-0",o[2]),T(t,"pointer-events-none",o[2]),A(t,nt,19,0,429)},l:function(g){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(g,s){u&&u.m(g,s),U(g,e,s),U(g,t,s),R(t,l),r||(c=K(t,"dblclick",o[4],!1,!1,!1),r=!0)},p:function(g,[s]){g[2]?u?u.p(g,s):(u=Pe(g),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),s&1&&Ke(l,g[0]),s&4&&T(t,"opacity-0",g[2]),s&4&&T(t,"pointer-events-none",g[2])},i:he,o:he,d:function(g){u&&u.d(g),g&&N(e),g&&N(t),r=!1,c()}};return O("SvelteRegisterBlock",{block:i,id:Fe.name,type:"component",source:"",ctx:o}),i}const Dt=({currentTarget:o})=>o.setAttribute("tabindex","-1");function Pt(o,e,t){let{$$slots:l={},$$scope:r}=e;ze("EditableCell",l,[]);let{edit:c}=e,{value:u=""}=e,{el:i}=e,{header:h=!1}=e;const g=["edit","value","el","header"];Object.keys(e).forEach(a=>{!~g.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<EditableCell> was created with unknown prop '${a}'`)});function s(a){Qe.call(this,o,a)}function p(a){Qe.call(this,o,a)}function f(){u=this.value,t(0,u)}function m(a){X[a?"unshift":"push"](()=>{i=a,t(1,i)})}return o.$$set=a=>{"edit"in a&&t(2,c=a.edit),"value"in a&&t(0,u=a.value),"el"in a&&t(1,i=a.el),"header"in a&&t(3,h=a.header)},o.$capture_state=()=>({edit:c,value:u,el:i,header:h}),o.$inject_state=a=>{"edit"in a&&t(2,c=a.edit),"value"in a&&t(0,u=a.value),"el"in a&&t(1,i=a.el),"header"in a&&t(3,h=a.header)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[u,i,c,h,s,p,f,m]}class Ve extends Ue{constructor(e){super(e),Ne(this,e,Pt,Fe,qe,{edit:2,value:0,el:1,header:3}),O("SvelteRegisterComponent",{component:this,tagName:"EditableCell",options:e,id:Fe.name});const{ctx:t}=this.$$,l=e.props||{};t[2]===void 0&&!("edit"in l)&&console.warn("<EditableCell> was created without expected prop 'edit'"),t[1]===void 0&&!("el"in l)&&console.warn("<EditableCell> was created without expected prop 'el'")}get edit(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set edit(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get el(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set el(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get header(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set header(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const S="Users/aliabid/projects/gradio/ui/packages/table/src/Table.svelte";function ue(o,e,t){const l=o.slice();return l[49]=e[t],l[51]=t,l}function fe(o,e,t){const l=o.slice();return l[52]=e[t].value,l[53]=e[t].id,l[54]=e,l[55]=t,l}function de(o,e,t){const l=o.slice();return l[52]=e[t].value,l[53]=e[t].id,l[56]=e,l[51]=t,l}function Te(o){let e,t;const l={c:function(){e=B("p"),t=ie(o[0]),b(e,"class","text-gray-600 text-[0.855rem] mb-2 block dark:text-gray-200 relative z-40"),A(e,S,376,2,11207)},m:function(c,u){U(c,e,u),R(e,t)},p:function(c,u){u[0]&1&&Ke(t,c[0])},d:function(c){c&&N(e)}};return O("SvelteRegisterBlock",{block:l,id:Te.name,type:"if",source:"(376:1) {#if label && label.length !== 0}",ctx:o}),l}function Ce(o){let e,t;const l={c:function(){e=B("caption"),t=ie(o[0]),b(e,"class","sr-only"),A(e,S,399,5,11850)},m:function(c,u){U(c,e,u),R(e,t)},p:function(c,u){u[0]&1&&Ke(t,c[0])},d:function(c){c&&N(e)}};return O("SvelteRegisterBlock",{block:l,id:Ce.name,type:"if",source:"(399:4) {#if label && label.length !== 0}",ctx:o}),l}function Re(o,e){let t,l,r,c,u,i,h,g,s,p,f,m=e[53],a,E,v;function P(j){e[28](j,e[53])}function d(){return e[29](e[53])}let k={value:e[52],edit:e[11]===e[53],header:!0};e[8][e[53]].input!==void 0&&(k.el=e[8][e[53]].input),r=new Ve({props:k,$$inline:!0}),X.push(()=>ge(r,"el",P)),r.$on("keydown",e[19]),r.$on("dblclick",d);function _(){return e[30](e[51])}const F=()=>e[31](t,m),M=()=>e[31](null,m),q={key:o,first:null,c:function(){t=B("th"),l=B("div"),le(r.$$.fragment),u=G(),i=B("div"),h=te("svg"),g=te("path"),p=G(),b(g,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),A(g,S,444,11,13476),b(h,"width","1em"),b(h,"height","1em"),b(h,"class","fill-current text-[10px]"),b(h,"viewBox","0 0 9 7"),b(h,"fill","none"),b(h,"xmlns","http://www.w3.org/2000/svg"),A(h,S,436,10,13259),b(i,"class",s="flex flex-none items-center justify-center p-2 cursor-pointer leading-snug transform transition-all "+(e[10]!==e[51]?"text-gray-200 hover:text-gray-500":"text-orange-500")+" "+(e[10]===e[51]&&e[9]==="des"?"-scale-y-[1]":"")),T(i,"text-gray-200",e[10]!==e[51]),A(i,S,425,9,12822),b(l,"class","min-h-[2.3rem] flex outline-none"),A(l,S,415,8,12540),b(t,"class","p-0 relative focus-within:ring-1 ring-orange-500 ring-inset outline-none "),b(t,"aria-sort",f=e[13](e[52],e[10],e[9])),T(t,"bg-orange-50",e[11]===e[53]),T(t,"dark:bg-transparent",e[11]===e[53]),T(t,"rounded-tl-lg",e[51]===0),T(t,"rounded-tr-lg",e[51]===e[6].length-1),A(t,S,406,7,12131),this.first=t},m:function(z,L){U(z,t,L),R(t,l),re(r,l,null),R(l,u),R(l,i),R(i,h),R(h,g),R(t,p),F(),a=!0,E||(v=K(i,"click",_,!1,!1,!1),E=!0)},p:function(z,L){e=z;const J={};L[0]&64&&(J.value=e[52]),L[0]&2112&&(J.edit=e[11]===e[53]),!c&&L[0]&320&&(c=!0,J.el=e[8][e[53]].input,_e(()=>c=!1)),r.$set(J),(!a||L[0]&1600&&s!==(s="flex flex-none items-center justify-center p-2 cursor-pointer leading-snug transform transition-all "+(e[10]!==e[51]?"text-gray-200 hover:text-gray-500":"text-orange-500")+" "+(e[10]===e[51]&&e[9]==="des"?"-scale-y-[1]":"")))&&b(i,"class",s),L[0]&1600&&T(i,"text-gray-200",e[10]!==e[51]),(!a||L[0]&1600&&f!==(f=e[13](e[52],e[10],e[9])))&&b(t,"aria-sort",f),m!==e[53]&&(M(),m=e[53],F()),L[0]&2112&&T(t,"bg-orange-50",e[11]===e[53]),L[0]&2112&&T(t,"dark:bg-transparent",e[11]===e[53]),L[0]&64&&T(t,"rounded-tl-lg",e[51]===0),L[0]&64&&T(t,"rounded-tr-lg",e[51]===e[6].length-1)},i:function(z){a||(Q(r.$$.fragment,z),a=!0)},o:function(z){W(r.$$.fragment,z),a=!1},d:function(z){z&&N(t),se(r),M(),E=!1,v()}};return O("SvelteRegisterBlock",{block:q,id:Re.name,type:"each",source:"(406:6) {#each _headers as { value, id }",ctx:e}),q}function Ae(o,e){let t,l,r,c,u,i=e[53],h,g,s;function p(F){e[32](F,e[52],e[54],e[55])}function f(F){e[33](F,e[53])}let m={edit:e[4]===e[53]};e[52]!==void 0&&(m.value=e[52]),e[8][e[53]].input!==void 0&&(m.el=e[8][e[53]].input),r=new Ve({props:m,$$inline:!0}),X.push(()=>ge(r,"value",p)),X.push(()=>ge(r,"el",f));const a=()=>e[34](t,i),E=()=>e[34](null,i);function v(){return e[35](e[53])}function P(){return e[36](e[53])}function d(){return e[37](e[53])}function k(...F){return e[38](e[51],e[55],e[53],...F)}const _={key:o,first:null,c:function(){t=B("td"),l=B("div"),le(r.$$.fragment),b(l,"class","min-h-[2.3rem] h-full outline-none flex items-center"),T(l,"border-transparent",e[5]!==e[53]),A(l,S,468,9,14529),b(t,"tabindex","0"),b(t,"class","outline-none focus-within:ring-1 ring-orange-500 ring-inset focus-within:bg-orange-50 dark:focus-within:bg-gray-800 group-last:first:rounded-bl-lg group-last:last:rounded-br-lg relative"),A(t,S,459,8,14051),this.first=t},m:function(M,q){U(M,t,q),R(t,l),re(r,l,null),a(),h=!0,g||(s=[K(t,"touchstart",v,{passive:!0},!1,!1),K(t,"click",P,!1,!1,!1),K(t,"dblclick",d,!1,!1,!1),K(t,"keydown",k,!1,!1,!1)],g=!0)},p:function(M,q){e=M;const j={};q[0]&144&&(j.edit=e[4]===e[53]),!c&&q[0]&128&&(c=!0,j.value=e[52],_e(()=>c=!1)),!u&&q[0]&384&&(u=!0,j.el=e[8][e[53]].input,_e(()=>u=!1)),r.$set(j),q[0]&160&&T(l,"border-transparent",e[5]!==e[53]),i!==e[53]&&(E(),i=e[53],a())},i:function(M){h||(Q(r.$$.fragment,M),h=!0)},o:function(M){W(r.$$.fragment,M),h=!1},d:function(M){M&&N(t),se(r),E(),g=!1,He(s)}};return O("SvelteRegisterBlock",{block:_,id:Ae.name,type:"each",source:"(459:7) {#each row as { value, id }",ctx:e}),_}function Se(o,e){let t,l=[],r=new Map,c,u,i=e[49];$(i);const h=s=>s[53];ee(e,i,fe,h);for(let s=0;s<i.length;s+=1){let p=fe(e,i,s),f=h(p);r.set(f,l[s]=Ae(f,p))}const g={key:o,first:null,c:function(){t=B("tr");for(let p=0;p<l.length;p+=1)l[p].c();c=G(),b(t,"class","group border-b dark:border-gray-700 last:border-none divide-x dark:divide-gray-700 space-x-4 odd:bg-gray-50 dark:odd:bg-gray-900 group focus:bg-gradient-to-b focus:from-blue-100 dark:focus:from-blue-900 focus:to-blue-50 dark:focus:to-gray-900 focus:odd:bg-white"),A(t,S,455,6,13710),this.first=t},m:function(p,f){U(p,t,f);for(let m=0;m<l.length;m+=1)l[m].m(t,null);R(t,c),u=!0},p:function(p,f){e=p,f[0]&115120&&(i=e[49],$(i),ke(),ee(e,i,fe,h),l=ve(l,f,h,1,e,i,r,t,Ee,Ae,c,fe),De())},i:function(p){if(!u){for(let f=0;f<i.length;f+=1)Q(l[f]);u=!0}},o:function(p){for(let f=0;f<l.length;f+=1)W(l[f]);u=!1},d:function(p){p&&N(t);for(let f=0;f<l.length;f+=1)l[f].d()}};return O("SvelteRegisterBlock",{block:g,id:Se.name,type:"each",source:"(455:5) {#each data as row, i (row)}",ctx:e}),g}function ot(o){let e,t,l,r,c=[],u=new Map,i,h,g=[],s=new Map,p,f=o[0]&&o[0].length!==0&&Ce(o),m=o[6];$(m);const a=d=>d[53];ee(o,m,de,a);for(let d=0;d<m.length;d+=1){let k=de(o,m,d),_=a(k);u.set(_,c[d]=Re(_,k))}let E=o[7];$(E);const v=d=>d[49];ee(o,E,ue,v);for(let d=0;d<E.length;d+=1){let k=ue(o,E,d),_=v(k);s.set(_,g[d]=Se(_,k))}const P={c:function(){e=B("table"),f&&f.c(),t=G(),l=B("thead"),r=B("tr");for(let k=0;k<c.length;k+=1)c[k].c();i=G(),h=B("tbody");for(let k=0;k<g.length;k+=1)g[k].c();b(r,"class","border-b dark:border-gray-700 divide-x dark:divide-gray-700 text-left"),A(r,S,402,5,11980),b(l,"class","sticky top-0 left-0 right-0 bg-white shadow-sm z-10"),A(l,S,401,4,11907),b(h,"class","overflow-y-scroll"),A(h,S,453,4,13636),b(e,"class","table-auto font-mono w-full text-gray-900 text-sm transition-opacity overflow-hidden"),T(e,"opacity-40",o[12]),A(e,S,394,3,11666)},m:function(k,_){U(k,e,_),f&&f.m(e,null),R(e,t),R(e,l),R(l,r);for(let F=0;F<c.length;F+=1)c[F].m(r,null);R(e,i),R(e,h);for(let F=0;F<g.length;F+=1)g[F].m(h,null);p=!0},p:function(k,_){k[0]&&k[0].length!==0?f?f.p(k,_):(f=Ce(k),f.c(),f.m(e,t)):f&&(f.d(1),f=null),_[0]&929600&&(m=k[6],$(m),ke(),ee(k,m,de,a),c=ve(c,_,a,1,k,m,u,r,Ee,Re,null,de),De()),_[0]&115120&&(E=k[7],$(E),ke(),ee(k,E,ue,v),g=ve(g,_,v,1,k,E,s,h,Ee,Se,null,ue),De()),_[0]&4096&&T(e,"opacity-40",k[12])},i:function(k){if(!p){for(let _=0;_<m.length;_+=1)Q(c[_]);for(let _=0;_<E.length;_+=1)Q(g[_]);p=!0}},o:function(k){for(let _=0;_<c.length;_+=1)W(c[_]);for(let _=0;_<g.length;_+=1)W(g[_]);p=!1},d:function(k){k&&N(e),f&&f.d();for(let _=0;_<c.length;_+=1)c[_].d();for(let _=0;_<g.length;_+=1)g[_].d()}};return O("SvelteRegisterBlock",{block:P,id:ot.name,type:"slot",source:"(387:2) <Upload    flex={false}    center={false}    boundedheight={false}    click={false}    on:load={(e) => blob_to_string(data_uri_to_blob(e.detail.data))}    bind:dragging   >",ctx:o}),P}function Be(o){let e,t,l=o[2][1]==="dynamic"&&je(o),r=o[1][1]==="dynamic"&&Le(o);const c={c:function(){e=B("div"),l&&l.c(),t=G(),r&&r.c(),b(e,"class","flex justify-end space-x-1 pt-2 text-gray-800"),A(e,S,487,2,14930)},m:function(i,h){U(i,e,h),l&&l.m(e,null),R(e,t),r&&r.m(e,null)},p:function(i,h){i[2][1]==="dynamic"?l?l.p(i,h):(l=je(i),l.c(),l.m(e,t)):l&&(l.d(1),l=null),i[1][1]==="dynamic"?r?r.p(i,h):(r=Le(i),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d:function(i){i&&N(e),l&&l.d(),r&&r.d()}};return O("SvelteRegisterBlock",{block:c,id:Be.name,type:"if",source:"(487:1) {#if editable}",ctx:o}),c}function je(o){let e,t,l,r,c,u;const i={c:function(){e=B("button"),t=te("svg"),l=te("path"),r=ie("New row"),b(l,"fill","currentColor"),b(l,"d","M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"),A(l,S,500,7,15402),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(t,"aria-hidden","true"),b(t,"role","img"),b(t,"class","mr-1 group-hover:text-orange-500"),b(t,"width","1em"),b(t,"height","1em"),b(t,"preserveAspectRatio","xMidYMid meet"),b(t,"viewBox","0 0 32 32"),A(t,S,490,6,15106),b(e,"class","!flex-none gr-button group"),A(e,S,489,4,15030)},m:function(g,s){U(g,e,s),R(e,t),R(t,l),R(e,r),c||(u=K(e,"click",o[41],!1,!1,!1),c=!0)},p:he,d:function(g){g&&N(e),c=!1,u()}};return O("SvelteRegisterBlock",{block:i,id:je.name,type:"if",source:'(489:3) {#if row_count[1] === \\"dynamic\\"}',ctx:o}),i}function Le(o){let e,t,l,r,c,u;const i={c:function(){e=B("button"),t=te("svg"),l=te("path"),r=ie(`
					New column`),b(l,"fill","currentColor"),b(l,"d","m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"),A(l,S,519,7,15974),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(t,"aria-hidden","true"),b(t,"role","img"),b(t,"class","mr-1 group-hover:text-orange-500"),b(t,"width","1em"),b(t,"height","1em"),b(t,"preserveAspectRatio","xMidYMid meet"),b(t,"viewBox","0 0 32 32"),A(t,S,509,5,15678),b(e,"class","!flex-none gr-button group"),A(e,S,508,4,15610)},m:function(g,s){U(g,e,s),R(e,t),R(t,l),R(e,r),c||(u=K(e,"click",o[21],!1,!1,!1),c=!0)},p:he,d:function(g){g&&N(e),c=!1,u()}};return O("SvelteRegisterBlock",{block:i,id:Le.name,type:"if",source:'(508:3) {#if col_count[1] === \\"dynamic\\"}',ctx:o}),i}function Oe(o){let e,t,l,r,c,u,i,h,g,s=o[0]&&o[0].length!==0&&Te(o);function p(E){o[39](E)}let f={flex:!1,center:!1,boundedheight:!1,click:!1,$$slots:{default:[ot]},$$scope:{ctx:o}};o[12]!==void 0&&(f.dragging=o[12]),r=new tt({props:f,$$inline:!0}),X.push(()=>ge(r,"dragging",p)),r.$on("load",o[40]);let m=o[3]&&Be(o);const a={c:function(){e=B("div"),s&&s.c(),t=G(),l=B("div"),le(r.$$.fragment),u=G(),m&&m.c(),b(l,"class","scroll-hide whitespace-nowrap overflow-hidden rounded-lg relative border transition-colors overflow-x-scroll"),T(l,"border-green-400",o[12]),A(l,S,382,1,11325),T(e,"mt-6",o[0]&&o[0].length!==0),A(e,S,374,0,11123)},l:function(v){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(v,P){U(v,e,P),s&&s.m(e,null),R(e,t),R(e,l),re(r,l,null),R(e,u),m&&m.m(e,null),i=!0,h||(g=[K(window,"click",o[22],!1,!1,!1),K(window,"touchstart",o[22],!1,!1,!1)],h=!0)},p:function(v,P){v[0]&&v[0].length!==0?s?s.p(v,P):(s=Te(v),s.c(),s.m(e,t)):s&&(s.d(1),s=null);const d={};P[0]&8177|P[1]&67108864&&(d.$$scope={dirty:P,ctx:v}),!c&&P[0]&4096&&(c=!0,d.dragging=v[12],_e(()=>c=!1)),r.$set(d),P[0]&4096&&T(l,"border-green-400",v[12]),v[3]?m?m.p(v,P):(m=Be(v),m.c(),m.m(e,null)):m&&(m.d(1),m=null),P[0]&1&&T(e,"mt-6",v[0]&&v[0].length!==0)},i:function(v){i||(Q(r.$$.fragment,v),i=!0)},o:function(v){W(r.$$.fragment,v),i=!1},d:function(v){v&&N(e),s&&s.d(),se(r),m&&m.d(),h=!1,He(g)}};return O("SvelteRegisterBlock",{block:a,id:Oe.name,type:"component",source:"",ctx:o}),a}function xe(o,e){return e.filter(t);function t(l){var r=-1;return o.split(`
`).every(c);function c(u){if(!u)return!0;var i=u.split(l).length;return r<0&&(r=i),r===i&&i>1}}}function $e(o){const e=atob(o.split(",")[1]),t=o.split(",")[0].split(":")[1].split(";")[0],l=new ArrayBuffer(e.length),r=new Uint8Array(l);for(let c=0;c<e.length;c++)r[c]=e.charCodeAt(c);return new Blob([l],{type:t})}function Ft(o,e,t){let{$$slots:l={},$$scope:r}=e;ze("Table",l,[]);let{label:c=null}=e,{headers:u=[]}=e,{values:i=[[]]}=e,{col_count:h}=e,{row_count:g}=e,{editable:s=!0}=e;const p=me();let f=!1,m=!1,a={};function E(n){let w=n||[];if(h[1]==="fixed"&&w.length<h[0]){const y=Array(h[0]-w.length).fill("").map((D,C)=>`${C+w.length}`);w=w.concat(y)}return!w||w.length===0?Array(h[0]).fill(0).map((y,D)=>{const C=`h-${D}`;return t(8,a[C]={cell:null,input:null},a),{id:C,value:JSON.stringify(D+1)}}):w.map((y,D)=>{const C=`h-${D}`;return t(8,a[C]={cell:null,input:null},a),{id:C,value:y??""}})}function v(n){const w=n.length>0?n.length:g[0];return Array(g[1]==="fixed"||w<g[0]?g[0]:w).fill(0).map((y,D)=>Array(h[1]==="fixed"?h[0]:n[0].length).fill(0).map((C,Y)=>{const Z=`${D}-${Y}`;return t(8,a[Z]={input:null,cell:null},a),{value:n?.[D]?.[Y]??"",id:Z}}))}let P=E(u),d;async function k(){typeof f=="string"?(await V(),a[f]?.input?.focus()):typeof m=="string"&&(await V(),a[m]?.input?.focus())}let _=[[]],F;function M(n,w,y){if(!w)return"none";if(u[w]===n){if(y==="asc")return"ascending";if(y==="des")return"descending"}}function q(n){return _.reduce((w,y,D)=>{const C=y.reduce((Y,Z,pe)=>n===Z.id?pe:Y,-1);return C===-1?w:[D,C]},[-1,-1])}async function j(n,w){if(!s||f===n)return;if(w){const[D,C]=q(n);t(7,_[D][C].value="",_)}t(4,f=n),await V();const{input:y}=a[n];y?.focus()}async function z(n,w,y,D){let C;switch(n.key){case"ArrowRight":if(f)break;n.preventDefault(),C=_[w][y+1],t(5,m=C?C.id:m);break;case"ArrowLeft":if(f)break;n.preventDefault(),C=_[w][y-1],t(5,m=C?C.id:m);break;case"ArrowDown":if(f)break;n.preventDefault(),C=_[w+1],t(5,m=C?C[y].id:m);break;case"ArrowUp":if(f)break;n.preventDefault(),C=_[w-1],t(5,m=C?C[y].id:m);break;case"Escape":if(!s)break;n.preventDefault(),t(5,m=f),t(4,f=!1);break;case"Enter":if(!s)break;if(n.preventDefault(),n.shiftKey){ce(w),await V();const[yt]=q(D);t(5,m=_[yt+1][y].id)}else f===D?t(4,f=!1):j(D);break;case"Backspace":if(!s)break;f||(n.preventDefault(),t(7,_[w][y].value="",_));break;case"Delete":if(!s)break;f||(n.preventDefault(),t(7,_[w][y].value="",_));break;case"Tab":let Y=n.shiftKey?-1:1,Z=_[w][y+Y],pe=_?.[w+Y]?.[Y>0?0:P.length-1],ye=Z||pe;ye&&(n.preventDefault(),t(5,m=ye?ye.id:m)),t(4,f=!1);break;default:(!f||f&&f!==D)&&n.key.length===1&&j(D,!0);break}}async function L(n){f!==n&&m!==n&&(t(4,f=!1),t(5,m=n))}async function J(n,w){if(w==="edit"&&typeof n=="string"&&(await V(),a[n].input?.focus()),w==="edit"&&typeof n=="boolean"&&typeof m=="string"){let y=a[m]?.cell;await V(),y?.focus()}if(w==="select"&&typeof n=="string"){const{cell:y}=a[n];await V(),y?.focus()}}let I,x;function Ye(n,w){w==="asc"?t(7,_=_.sort((y,D)=>y[n].value<D[n].value?-1:1)):w==="des"&&t(7,_=_.sort((y,D)=>y[n].value>D[n].value?-1:1))}function we(n){typeof x!="number"||x!==n?(t(9,I="asc"),t(10,x=n)):I==="asc"?t(9,I="des"):I==="des"&&t(9,I="asc"),Ye(n,I)}let H;async function ae(n,w){!s||h[1]!=="dynamic"||f===n||(t(11,H=n),await V(),a[n].input?.focus(),w&&a[n].input?.select())}function Ge(n){if(!!s)switch(n.key){case"Escape":n.preventDefault(),t(5,m=H),t(11,H=!1);break;case"Enter":n.preventDefault(),t(5,m=H),t(11,H=!1)}}function ce(n){g[1]==="dynamic"&&(_.splice(n?n+1:_.length,0,Array(_[0].length).fill(0).map((w,y)=>{const D=`${_.length}-${y}`;return t(8,a[D]={cell:null,input:null},a),{id:D,value:""}})),t(7,_),t(24,i),t(27,F))}async function Ie(){if(h[1]!=="dynamic")return;for(let w=0;w<_.length;w++){const y=`${w}-${_[w].length}`;t(8,a[y]={cell:null,input:null},a),_[w].push({id:y,value:""})}const n=`h-${P.length}`;t(8,a[n]={cell:null,input:null},a),P.push({id:n,value:`Header ${P.length+1}`}),t(7,_),t(24,i),t(27,F),t(6,P),t(25,u),t(26,d),await V(),ae(n,!0)}function Je(n){typeof f=="string"&&a[f]&&a[f].cell!==n.target&&!a[f].cell?.contains(n?.target)&&t(4,f=!1),typeof H=="string"&&a[H]&&a[H].cell!==n.target&&!a[H].cell?.contains(n.target)&&t(11,H=!1)}function be(n){const w=new FileReader;function y(D){if(!D?.target?.result||typeof D.target.result!="string")return;const[C]=xe(D.target.result,[",","	"]),[Y,...Z]=We(C).parseRows(D.target.result);t(6,P=E(h[1]==="fixed"?Y.slice(0,h[0]):Y)),t(24,i=Z),w.removeEventListener("loadend",y)}w.addEventListener("loadend",y),w.readAsText(n)}let ne=!1;const rt=["label","headers","values","col_count","row_count","editable"];Object.keys(e).forEach(n=>{!~rt.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<Table> was created with unknown prop '${n}'`)});function st(n,w){o.$$.not_equal(a[w].input,n)&&(a[w].input=n,t(8,a))}const it=n=>ae(n),at=n=>we(n);function ct(n,w){X[n?"unshift":"push"](()=>{a[w].cell=n,t(8,a)})}function ut(n,w,y,D){y[D].value=n,t(7,_),t(24,i),t(27,F)}function ft(n,w){o.$$.not_equal(a[w].input,n)&&(a[w].input=n,t(8,a))}function dt(n,w){X[n?"unshift":"push"](()=>{a[w].cell=n,t(8,a)})}const ht=n=>j(n),gt=n=>L(n),mt=n=>j(n),_t=(n,w,y,D)=>z(D,n,w,y);function wt(n){ne=n,t(12,ne)}const bt=n=>be($e(n.detail.data)),pt=()=>ce();return o.$$set=n=>{"label"in n&&t(0,c=n.label),"headers"in n&&t(25,u=n.headers),"values"in n&&t(24,i=n.values),"col_count"in n&&t(1,h=n.col_count),"row_count"in n&&t(2,g=n.row_count),"editable"in n&&t(3,s=n.editable)},o.$capture_state=()=>({createEventDispatcher:me,tick:V,dsvFormat:We,dequal:oe,Upload:tt,EditableCell:Ve,label:c,headers:u,values:i,col_count:h,row_count:g,editable:s,dispatch:p,editing:f,selected:m,els:a,make_headers:E,process_data:v,_headers:P,old_headers:d,refresh_focus:k,data:_,old_val:F,get_sort_status:M,get_current_indices:q,start_edit:j,handle_keydown:z,handle_cell_click:L,set_focus:J,sort_direction:I,sort_by:x,sort:Ye,handle_sort:we,header_edit:H,edit_header:ae,end_header_edit:Ge,add_row:ce,add_col:Ie,handle_click_outside:Je,guess_delimitaor:xe,data_uri_to_blob:$e,blob_to_string:be,dragging:ne}),o.$inject_state=n=>{"label"in n&&t(0,c=n.label),"headers"in n&&t(25,u=n.headers),"values"in n&&t(24,i=n.values),"col_count"in n&&t(1,h=n.col_count),"row_count"in n&&t(2,g=n.row_count),"editable"in n&&t(3,s=n.editable),"editing"in n&&t(4,f=n.editing),"selected"in n&&t(5,m=n.selected),"els"in n&&t(8,a=n.els),"_headers"in n&&t(6,P=n._headers),"old_headers"in n&&t(26,d=n.old_headers),"data"in n&&t(7,_=n.data),"old_val"in n&&t(27,F=n.old_val),"sort_direction"in n&&t(9,I=n.sort_direction),"sort_by"in n&&t(10,x=n.sort_by),"header_edit"in n&&t(11,H=n.header_edit),"dragging"in n&&t(12,ne=n.dragging)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty[0]&100663296&&(oe(u,d)||(t(6,P=E(u)),t(26,d=u),k())),o.$$.dirty[0]&150994944&&(oe(i,F)||(t(7,_=v(i)),t(27,F=i),k())),o.$$.dirty[0]&192&&P&&p("change",_.map(n=>n.map(({value:w})=>w))),o.$$.dirty[0]&16&&J(f,"edit"),o.$$.dirty[0]&32&&J(m,"select")},[c,h,g,s,f,m,P,_,a,I,x,H,ne,M,j,z,L,we,ae,Ge,ce,Ie,Je,be,i,u,d,F,st,it,at,ct,ut,ft,dt,ht,gt,mt,_t,wt,bt,pt]}class lt extends Ue{constructor(e){super(e),Ne(this,e,Ft,Oe,qe,{label:0,headers:25,values:24,col_count:1,row_count:2,editable:3},null,[-1,-1]),O("SvelteRegisterComponent",{component:this,tagName:"Table",options:e,id:Oe.name});const{ctx:t}=this.$$,l=e.props||{};t[1]===void 0&&!("col_count"in l)&&console.warn("<Table> was created without expected prop 'col_count'"),t[2]===void 0&&!("row_count"in l)&&console.warn("<Table> was created without expected prop 'row_count'")}get label(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set label(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get headers(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set headers(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get values(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set values(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get col_count(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set col_count(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get row_count(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set row_count(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Tt="src/components/DataFrame/DataFrame.svelte";function Me(o){let e,t,l,r,c;const u=[o[9]];let i={};for(let g=0;g<u.length;g+=1)i=kt(i,u[g]);t=new et({props:i,$$inline:!0}),r=new lt({props:{label:o[8],row_count:o[6],col_count:o[5],values:o[1],headers:o[0],editable:o[4]==="dynamic"},$$inline:!0}),r.$on("change",o[10]);const h={c:function(){e=B("div"),le(t.$$.fragment),l=G(),le(r.$$.fragment),b(e,"id",o[2]),b(e,"class","relative overflow-hidden"),T(e,"hidden",o[3]===!1),T(e,"flex-1",o[7]==="row"||!o[7]),A(e,Tt,32,0,863)},l:function(s){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(s,p){U(s,e,p),re(t,e,null),R(e,l),re(r,e,null),c=!0},p:function(s,[p]){const f=p&512?vt(u,[Et(s[9])]):{};t.$set(f);const m={};p&256&&(m.label=s[8]),p&64&&(m.row_count=s[6]),p&32&&(m.col_count=s[5]),p&2&&(m.values=s[1]),p&1&&(m.headers=s[0]),p&16&&(m.editable=s[4]==="dynamic"),r.$set(m),(!c||p&4)&&b(e,"id",s[2]),p&8&&T(e,"hidden",s[3]===!1),p&128&&T(e,"flex-1",s[7]==="row"||!s[7])},i:function(s){c||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),c=!0)},o:function(s){W(t.$$.fragment,s),W(r.$$.fragment,s),c=!1},d:function(s){s&&N(e),se(t),se(r)}};return O("SvelteRegisterBlock",{block:h,id:Me.name,type:"component",source:"",ctx:o}),h}function Ct(o,e,t){let{$$slots:l={},$$scope:r}=e;ze("DataFrame",l,[]);let{headers:c=[]}=e,{elem_id:u=""}=e,{visible:i=!0}=e,{value:h=[["","",""]]}=e,{mode:g}=e,{col_count:s}=e,{row_count:p}=e,{parent:f=null}=e,{label:m=null}=e;const a=me();let{loading_status:E}=e;async function v({detail:d}){t(1,h=d),await V(),a("change",d)}const P=["headers","elem_id","visible","value","mode","col_count","row_count","parent","label","loading_status"];return Object.keys(e).forEach(d=>{!~P.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<DataFrame> was created with unknown prop '${d}'`)}),o.$$set=d=>{"headers"in d&&t(0,c=d.headers),"elem_id"in d&&t(2,u=d.elem_id),"visible"in d&&t(3,i=d.visible),"value"in d&&t(1,h=d.value),"mode"in d&&t(4,g=d.mode),"col_count"in d&&t(5,s=d.col_count),"row_count"in d&&t(6,p=d.row_count),"parent"in d&&t(7,f=d.parent),"label"in d&&t(8,m=d.label),"loading_status"in d&&t(9,E=d.loading_status)},o.$capture_state=()=>({Table:lt,StatusTracker:et,createEventDispatcher:me,tick:V,headers:c,elem_id:u,visible:i,value:h,mode:g,col_count:s,row_count:p,parent:f,label:m,dispatch:a,loading_status:E,handle_change:v}),o.$inject_state=d=>{"headers"in d&&t(0,c=d.headers),"elem_id"in d&&t(2,u=d.elem_id),"visible"in d&&t(3,i=d.visible),"value"in d&&t(1,h=d.value),"mode"in d&&t(4,g=d.mode),"col_count"in d&&t(5,s=d.col_count),"row_count"in d&&t(6,p=d.row_count),"parent"in d&&t(7,f=d.parent),"label"in d&&t(8,m=d.label),"loading_status"in d&&t(9,E=d.loading_status)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&3&&(Array.isArray(h)?(t(1,h),t(0,c)):(Array.isArray(h.headers)&&t(0,c=h.headers),t(1,h=h.data.length===0?[Array(c.length).fill("")]:h.data)))},[c,h,u,i,g,s,p,f,m,E,v]}class Rt extends Ue{constructor(e){super(e),Ne(this,e,Ct,Me,qe,{headers:0,elem_id:2,visible:3,value:1,mode:4,col_count:5,row_count:6,parent:7,label:8,loading_status:9}),O("SvelteRegisterComponent",{component:this,tagName:"DataFrame",options:e,id:Me.name});const{ctx:t}=this.$$,l=e.props||{};t[4]===void 0&&!("mode"in l)&&console.warn("<DataFrame> was created without expected prop 'mode'"),t[5]===void 0&&!("col_count"in l)&&console.warn("<DataFrame> was created without expected prop 'col_count'"),t[6]===void 0&&!("row_count"in l)&&console.warn("<DataFrame> was created without expected prop 'row_count'"),t[9]===void 0&&!("loading_status"in l)&&console.warn("<DataFrame> was created without expected prop 'loading_status'")}get headers(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set headers(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get elem_id(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set elem_id(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get visible(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set visible(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get col_count(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set col_count(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get row_count(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set row_count(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get parent(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set parent(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get label(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set label(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get loading_status(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set loading_status(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var jt=Rt;const Lt=["static","dynamic"];export{jt as Component,Lt as modes};
