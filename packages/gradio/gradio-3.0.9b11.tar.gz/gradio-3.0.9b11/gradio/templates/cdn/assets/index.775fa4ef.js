import{S as ze,i as Ee,s as qe,d as O,x as Ae,ag as ne,v as Be,ab as x,R as le,T as Oe,B as C,C as D,l as I,D as z,E as B,F as N,I as $,w as U,q as Ue,e as q,U as Ve,V as Qe,G as oe,H as se,g as A,o as L,h as M,b as p,N as j,c as G,t as v,f as E,u as ie,r as Re,n as re,ak as je}from"./index.6dd03536.js";import{B as ae}from"./Block.54a63cf4.js";import{B as ce}from"./BlockLabel.17037761.js";import{M as ue}from"./ModifyUpload.c18b2e8c.js";import{I as Y}from"./Image.87bcb853.js";import"./styles.d87a390f.js";const{console:H}=Ae,P="src/components/Gallery/Gallery.svelte";function ee(n,t,e){const o=n.slice();return o[27]=t[e],o[29]=e,o}function te(n,t,e){const o=n.slice();return o[27]=t[e],o[30]=t,o[29]=e,o}function fe(n){let t,e,o,c,f,a,i=n[7]!==null&&F(n),m=n[5];L(m);let _=[];for(let h=0;h<m.length;h+=1)_[h]=W(ee(n,m,h));let d=null;m.length||(d=K(n));const w={c:function(){i&&i.c(),t=U(),e=M("div"),o=M("div");for(let g=0;g<_.length;g+=1)_[g].c();d&&d.c(),p(o,"class",c="grid gap-2 "+n[13]+" s-QzgPMAMVqUOn"),v(o,"pt-6",n[1]),G(o,P,122,3,3903),p(e,"class","overflow-y-auto h-full p-2 s-QzgPMAMVqUOn"),ne(()=>n[23].call(e)),v(e,"min-h-[350px]",n[6].height!=="auto"),v(e,"max-h-[55vh]",n[6].height!=="auto"),v(e,"xl:min-h-[450px]",n[6].height!=="auto"),G(e,P,115,2,3674)},m:function(g,u){i&&i.m(g,u),q(g,t,u),q(g,e,u),E(e,o);for(let s=0;s<_.length;s+=1)_[s].m(o,null);d&&d.m(o,null),f=je(e,n[23].bind(e)),a=!0},p:function(g,u){if(g[7]!==null?i?(i.p(g,u),u[0]&128&&z(i,1)):(i=F(g),i.c(),z(i,1),i.m(t.parentNode,t)):i&&(oe(),B(i,1,1,()=>{i=null}),se()),u[0]&4256){m=g[5],L(m);let s;for(s=0;s<m.length;s+=1){const r=ee(g,m,s);_[s]?_[s].p(r,u):(_[s]=W(r),_[s].c(),_[s].m(o,null))}for(;s<_.length;s+=1)_[s].d(1);_.length=m.length,!m.length&&d?d.p(g,u):m.length?d&&(d.d(1),d=null):(d=K(g),d.c(),d.m(o,null))}(!a||u[0]&8192&&c!==(c="grid gap-2 "+g[13]+" s-QzgPMAMVqUOn"))&&p(o,"class",c),u[0]&8194&&v(o,"pt-6",g[1]),u[0]&64&&v(e,"min-h-[350px]",g[6].height!=="auto"),u[0]&64&&v(e,"max-h-[55vh]",g[6].height!=="auto"),u[0]&64&&v(e,"xl:min-h-[450px]",g[6].height!=="auto")},i:function(g){a||(z(i),a=!0)},o:function(g){B(i),a=!1},d:function(g){i&&i.d(g),g&&A(t),g&&A(e),ie(_,g),d&&d.d(),f()}};return O("SvelteRegisterBlock",{block:w,id:fe.name,type:"else",source:"(74:1) {:else}",ctx:n}),w}function he(n){let t,e,o,c;o=new Y({$$inline:!0});const f={c:function(){t=M("div"),e=M("div"),C(o.$$.fragment),p(e,"class","h-5 dark:text-white opacity-50 s-QzgPMAMVqUOn"),G(e,P,71,3,2344),p(t,"class","h-full min-h-[15rem] flex justify-center items-center s-QzgPMAMVqUOn"),G(t,P,70,2,2273)},m:function(i,m){q(i,t,m),E(t,e),D(o,e,null),c=!0},p:re,i:function(i){c||(z(o.$$.fragment,i),c=!0)},o:function(i){B(o.$$.fragment,i),c=!1},d:function(i){i&&A(t),N(o)}};return O("SvelteRegisterBlock",{block:f,id:he.name,type:"if",source:"(70:1) {#if value === null}",ctx:n}),f}function F(n){let t,e,o,c,f,a,i,m,_,d;e=new ue({$$inline:!0}),e.$on("clear",n[17]);let w=n[5];L(w);let h=[];for(let u=0;u<w.length;u+=1)h[u]=J(te(n,w,u));const g={c:function(){t=M("div"),C(e.$$.fragment),o=U(),c=M("img"),a=U(),i=M("div");for(let s=0;s<h.length;s+=1)h[s].c();p(c,"class","w-full object-contain h-[calc(100%-50px)] s-QzgPMAMVqUOn"),j(c.src,f=n[5][n[7]])||p(c,"src",f),p(c,"alt",""),G(c,P,84,4,2812),p(i,"class","absolute h-[60px] bg-white dark:bg-gray-900 overflow-x-scroll scroll-hide w-full bottom-0 flex gap-1.5 items-center py-2 text-sm px-3 justify-center s-QzgPMAMVqUOn"),G(i,P,91,4,2975),p(t,"class","absolute inset-0 z-10 flex flex-col bg-white/90 dark:bg-gray-900 backdrop-blur h-full s-QzgPMAMVqUOn"),v(t,"min-h-[350px]",n[6].height!=="auto"),v(t,"max-h-[55vh]",n[6].height!=="auto"),v(t,"xl:min-h-[450px]",n[6].height!=="auto"),G(t,P,75,3,2457)},m:function(s,r){q(s,t,r),D(e,t,null),E(t,o),E(t,c),E(t,a),E(t,i);for(let b=0;b<h.length;b+=1)h[b].m(i,null);n[21](i),m=!0,_||(d=[I(c,"click",n[18],!1,!1,!1),I(t,"keydown",n[15],!1,!1,!1)],_=!0)},p:function(s,r){if((!m||r[0]&160&&!j(c.src,f=s[5][s[7]]))&&p(c,"src",f),r[0]&1184){w=s[5],L(w);let b;for(b=0;b<w.length;b+=1){const y=te(s,w,b);h[b]?h[b].p(y,r):(h[b]=J(y),h[b].c(),h[b].m(i,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=w.length}r[0]&64&&v(t,"min-h-[350px]",s[6].height!=="auto"),r[0]&64&&v(t,"max-h-[55vh]",s[6].height!=="auto"),r[0]&64&&v(t,"xl:min-h-[450px]",s[6].height!=="auto")},i:function(s){m||(z(e.$$.fragment,s),m=!0)},o:function(s){B(e.$$.fragment,s),m=!1},d:function(s){s&&A(t),N(e),ie(h,s),n[21](null),_=!1,Re(d)}};return O("SvelteRegisterBlock",{block:g,id:F.name,type:"if",source:"(75:2) {#if selected_image !== null}",ctx:n}),g}function J(n){let t,e,o,c,f,a=n[29],i,m;const _=()=>n[19](t,a),d=()=>n[19](null,a);function w(){return n[20](n[29])}const h={c:function(){t=M("button"),e=M("img"),c=U(),p(e,"alt",""),p(e,"class","h-full w-full overflow-hidden object-contain s-QzgPMAMVqUOn"),j(e.src,o=n[27])||p(e,"src",o),G(e,P,104,7,3502),p(t,"class",f="gallery-item !flex-none !h-9 !w-9 transition-all duration-75 "+(n[7]===n[29]?"!ring-2 !ring-orange-500 hover:!ring-orange-500":"scale-90 transform")+" s-QzgPMAMVqUOn"),G(t,P,96,6,3212)},m:function(u,s){q(u,t,s),E(t,e),E(t,c),_(),i||(m=I(t,"click",w,!1,!1,!1),i=!0)},p:function(u,s){n=u,s[0]&32&&!j(e.src,o=n[27])&&p(e,"src",o),s[0]&128&&f!==(f="gallery-item !flex-none !h-9 !w-9 transition-all duration-75 "+(n[7]===n[29]?"!ring-2 !ring-orange-500 hover:!ring-orange-500":"scale-90 transform")+" s-QzgPMAMVqUOn")&&p(t,"class",f),a!==n[29]&&(d(),a=n[29],_())},d:function(u){u&&A(t),d(),i=!1,m()}};return O("SvelteRegisterBlock",{block:h,id:J.name,type:"each",source:"(96:5) {#each value as image, i}",ctx:n}),h}function K(n){let t;const e={c:function(){t=M("p"),t.textContent="Empty",p(t,"class","s-QzgPMAMVqUOn"),G(t,P,135,5,4255)},m:function(c,f){q(c,t,f)},p:re,d:function(c){c&&A(t)}};return O("SvelteRegisterBlock",{block:e,id:K.name,type:"else",source:"(135:4) {:else}",ctx:n}),e}function W(n){let t,e,o,c,f,a;function i(){return n[22](n[29])}const m={c:function(){t=M("button"),e=M("img"),c=U(),p(e,"alt",""),p(e,"class","h-full w-full overflow-hidden object-contain s-QzgPMAMVqUOn"),j(e.src,o=n[27])||p(e,"src",o),G(e,P,128,6,4116),p(t,"class","gallery-item s-QzgPMAMVqUOn"),G(t,P,124,5,3996)},m:function(d,w){q(d,t,w),E(t,e),E(t,c),f||(a=I(t,"click",i,!1,!1,!1),f=!0)},p:function(d,w){n=d,w[0]&32&&!j(e.src,o=n[27])&&p(e,"src",o)},d:function(d){d&&A(t),f=!1,a()}};return O("SvelteRegisterBlock",{block:m,id:W.name,type:"each",source:"(124:4) {#each value as image, i}",ctx:n}),m}function ge(n){let t,e,o,c,f,a,i,m;const _=[n[0]];let d={};for(let s=0;s<_.length;s+=1)d=Oe(d,_[s]);t=new le({props:d,$$inline:!0}),o=new ce({props:{show_label:n[1],Icon:Y,label:n[2]||"Gallery"},$$inline:!0});const w=[he,fe],h=[];function g(s,r){return s[5]===null?0:1}f=g(n),a=h[f]=w[f](n);const u={c:function(){C(t.$$.fragment),e=U(),C(o.$$.fragment),c=U(),a.c(),i=Ue()},m:function(r,b){D(t,r,b),q(r,e,b),D(o,r,b),q(r,c,b),h[f].m(r,b),q(r,i,b),m=!0},p:function(r,b){const y=b[0]&1?Ve(_,[Qe(r[0])]):{};t.$set(y);const k={};b[0]&2&&(k.show_label=r[1]),b[0]&4&&(k.label=r[2]||"Gallery"),o.$set(k);let V=f;f=g(r),f===V?h[f].p(r,b):(oe(),B(h[V],1,1,()=>{h[V]=null}),se(),a=h[f],a?a.p(r,b):(a=h[f]=w[f](r),a.c()),z(a,1),a.m(i.parentNode,i))},i:function(r){m||(z(t.$$.fragment,r),z(o.$$.fragment,r),z(a),m=!0)},o:function(r){B(t.$$.fragment,r),B(o.$$.fragment,r),B(a),m=!1},d:function(r){N(t,r),r&&A(e),N(o,r),r&&A(c),h[f].d(r),r&&A(i)}};return O("SvelteRegisterBlock",{block:u,id:ge.name,type:"slot",source:'(67:0) <Block variant=\\"solid\\" color=\\"grey\\" padding={false} {elem_id} {visible}>',ctx:n}),u}function X(n){let t,e,o,c;ne(n[16]),t=new ae({props:{variant:"solid",color:"grey",padding:!1,elem_id:n[3],visible:n[4],$$slots:{default:[ge]},$$scope:{ctx:n}},$$inline:!0});const f={c:function(){C(t.$$.fragment)},l:function(i){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,m){D(t,i,m),e=!0,o||(c=I(window,"resize",n[16]),o=!0)},p:function(i,m){const _={};m[0]&8&&(_.elem_id=i[3]),m[0]&16&&(_.visible=i[4]),m[0]&32231|m[1]&1&&(_.$$scope={dirty:m,ctx:i}),t.$set(_)},i:function(i){e||(z(t.$$.fragment,i),e=!0)},o:function(i){B(t.$$.fragment,i),e=!1},d:function(i){N(t,i),o=!1,c()}};return O("SvelteRegisterBlock",{block:f,id:X.name,type:"component",source:"",ctx:n}),f}function Se(n,t,e){let o,c,f,a,{$$slots:i={},$$scope:m}=t;Be("Gallery",i,[]);let{loading_status:_}=t,{show_label:d}=t,{label:w}=t,{elem_id:h=""}=t,{visible:g=!0}=t,{value:u=null}=t,{style:s={}}=t,r=null;function b(l){switch(l.code){case"Escape":l.preventDefault(),e(7,r=null);break;case"ArrowLeft":l.preventDefault(),e(7,r=o);break;case"ArrowRight":l.preventDefault(),e(7,r=c);break}}let y=[],k;async function V(l){if(typeof l!="number")return;await x(),y[l].focus();const{left:R,width:Me}=k.getBoundingClientRect(),{left:Ge,width:Pe}=y[l].getBoundingClientRect(),Z=Ge-R+Pe/2-Me/2+k.scrollLeft;k.scrollTo({left:Z<0?0:Z,behavior:"smooth"})}let T=["","sm:","md:","lg:","xl:","2xl:"],Q=0,S=0;const me=["loading_status","show_label","label","elem_id","visible","value","style"];Object.keys(t).forEach(l=>{!~me.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&H.warn(`<Gallery> was created with unknown prop '${l}'`)});function _e(){e(9,S=window.innerHeight)}const de=()=>e(7,r=null),be=()=>e(7,r=c);function we(l,R){$[l?"unshift":"push"](()=>{y[R]=l,e(10,y)})}const pe=l=>e(7,r=l);function ve(l){$[l?"unshift":"push"](()=>{k=l,e(11,k)})}const ye=l=>e(7,r=a?l:r);function ke(){Q=this.clientHeight,e(8,Q)}return n.$$set=l=>{"loading_status"in l&&e(0,_=l.loading_status),"show_label"in l&&e(1,d=l.show_label),"label"in l&&e(2,w=l.label),"elem_id"in l&&e(3,h=l.elem_id),"visible"in l&&e(4,g=l.visible),"value"in l&&e(5,u=l.value),"style"in l&&e(6,s=l.style)},n.$capture_state=()=>({Block:ae,BlockLabel:ce,ModifyUpload:ue,tick:x,StatusTracker:le,Image:Y,loading_status:_,show_label:d,label:w,elem_id:h,visible:g,value:u,style:s,selected_image:r,on_keydown:b,el:y,container:k,scroll_to_img:V,grid_map:T,height:Q,window_height:S,can_zoom:a,grid:f,next:c,previous:o}),n.$inject_state=l=>{"loading_status"in l&&e(0,_=l.loading_status),"show_label"in l&&e(1,d=l.show_label),"label"in l&&e(2,w=l.label),"elem_id"in l&&e(3,h=l.elem_id),"visible"in l&&e(4,g=l.visible),"value"in l&&e(5,u=l.value),"style"in l&&e(6,s=l.style),"selected_image"in l&&e(7,r=l.selected_image),"el"in l&&e(10,y=l.el),"container"in l&&e(11,k=l.container),"grid_map"in l&&e(26,T=l.grid_map),"height"in l&&e(8,Q=l.height),"window_height"in l&&e(9,S=l.window_height),"can_zoom"in l&&e(12,a=l.can_zoom),"grid"in l&&e(13,f=l.grid),"next"in l&&e(14,c=l.next),"previous"in l&&(o=l.previous)},t&&"$$inject"in t&&n.$inject_state(t.$$inject),n.$$.update=()=>{n.$$.dirty[0]&32&&console.log(">",u),n.$$.dirty[0]&160&&(o=((r??0)+(u?.length??0)-1)%(u?.length??0)),n.$$.dirty[0]&160&&e(14,c=((r??0)+1)%(u?.length??0)),n.$$.dirty[0]&128&&V(r),n.$$.dirty[0]&64&&e(13,f=s.grid?Array(6).fill(0).map((l,R)=>`${T[R]}grid-cols-${s.grid[R]||s.grid[s.grid.length-1]}`).join(" "):"grid-cols-3 md:grid-cols-4 lg:grid-cols-6"),n.$$.dirty[0]&768&&e(12,a=S>=Q)},[_,d,w,h,g,u,s,r,Q,S,y,k,a,f,c,b,_e,de,be,we,pe,ve,ye,ke]}class Ce extends ze{constructor(t){super(t),Ee(this,t,Se,X,qe,{loading_status:0,show_label:1,label:2,elem_id:3,visible:4,value:5,style:6},null,[-1,-1]),O("SvelteRegisterComponent",{component:this,tagName:"Gallery",options:t,id:X.name});const{ctx:e}=this.$$,o=t.props||{};e[0]===void 0&&!("loading_status"in o)&&H.warn("<Gallery> was created without expected prop 'loading_status'"),e[1]===void 0&&!("show_label"in o)&&H.warn("<Gallery> was created without expected prop 'show_label'"),e[2]===void 0&&!("label"in o)&&H.warn("<Gallery> was created without expected prop 'label'")}get loading_status(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set loading_status(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get show_label(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set show_label(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get label(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set label(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get elem_id(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set elem_id(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get visible(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set visible(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get style(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set style(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var Je=Ce;const Ke=["static"];export{Je as Component,Ke as modes};
