import{S as ze,i as Ee,s as qe,d as O,x as Ae,ag as le,v as Be,ab as x,R as ne,T as Oe,B as C,C as D,l as I,D as q,E as B,F as N,I as $,w as U,q as Ue,e as M,U as Ve,V as Qe,G as oe,H as se,g as G,o as L,h as P,b as p,N as j,c as z,t as y,f as A,u as ie,r as Re,k as je,n as re,ak as Se}from"./index.3cb8de18.js";import{B as ae}from"./Block.0aee9c3b.js";import{B as ce}from"./BlockLabel.ce5933ec.js";import{M as ue}from"./ModifyUpload.ff71eb8b.js";import{I as Y}from"./Image.21bcb509.js";import"./styles.d87a390f.js";const{console:H}=Ae,E="src/components/Gallery/Gallery.svelte";function ee(l,t,e){const o=l.slice();return o[27]=t[e],o[29]=e,o}function te(l,t,e){const o=l.slice();return o[27]=t[e],o[30]=t,o[29]=e,o}function fe(l){let t,e,o,a,c,u,i=l[7]!==null&&F(l),m=l[5];L(m);let g=[];for(let f=0;f<m.length;f+=1)g[f]=W(ee(l,m,f));let b=null;m.length||(b=K(l));const w={c:function(){i&&i.c(),t=U(),e=P("div"),o=P("div");for(let _=0;_<g.length;_+=1)g[_].c();b&&b.c(),p(o,"class",a="grid gap-2 "+l[13]+" s-QzgPMAMVqUOn"),y(o,"pt-6",l[1]),z(o,E,123,3,3923),p(e,"class","overflow-y-auto h-full p-2 s-QzgPMAMVqUOn"),le(()=>l[23].call(e)),y(e,"min-h-[350px]",l[6].height!=="auto"),y(e,"max-h-[55vh]",l[6].height!=="auto"),y(e,"xl:min-h-[450px]",l[6].height!=="auto"),z(e,E,116,2,3694)},m:function(_,d){i&&i.m(_,d),M(_,t,d),M(_,e,d),A(e,o);for(let s=0;s<g.length;s+=1)g[s].m(o,null);b&&b.m(o,null),c=Se(e,l[23].bind(e)),u=!0},p:function(_,d){if(_[7]!==null?i?(i.p(_,d),d[0]&128&&q(i,1)):(i=F(_),i.c(),q(i,1),i.m(t.parentNode,t)):i&&(oe(),B(i,1,1,()=>{i=null}),se()),d[0]&4256){m=_[5],L(m);let s;for(s=0;s<m.length;s+=1){const r=ee(_,m,s);g[s]?g[s].p(r,d):(g[s]=W(r),g[s].c(),g[s].m(o,null))}for(;s<g.length;s+=1)g[s].d(1);g.length=m.length,!m.length&&b?b.p(_,d):m.length?b&&(b.d(1),b=null):(b=K(_),b.c(),b.m(o,null))}(!u||d[0]&8192&&a!==(a="grid gap-2 "+_[13]+" s-QzgPMAMVqUOn"))&&p(o,"class",a),d[0]&8194&&y(o,"pt-6",_[1]),d[0]&64&&y(e,"min-h-[350px]",_[6].height!=="auto"),d[0]&64&&y(e,"max-h-[55vh]",_[6].height!=="auto"),d[0]&64&&y(e,"xl:min-h-[450px]",_[6].height!=="auto")},i:function(_){u||(q(i),u=!0)},o:function(_){B(i),u=!1},d:function(_){i&&i.d(_),_&&G(t),_&&G(e),ie(g,_),b&&b.d(),c()}};return O("SvelteRegisterBlock",{block:w,id:fe.name,type:"else",source:"(74:1) {:else}",ctx:l}),w}function he(l){let t,e,o,a;o=new Y({$$inline:!0});const c={c:function(){t=P("div"),e=P("div"),C(o.$$.fragment),p(e,"class","h-5 dark:text-white opacity-50 s-QzgPMAMVqUOn"),z(e,E,71,3,2344),p(t,"class","h-full min-h-[15rem] flex justify-center items-center s-QzgPMAMVqUOn"),z(t,E,70,2,2273)},m:function(i,m){M(i,t,m),A(t,e),D(o,e,null),a=!0},p:re,i:function(i){a||(q(o.$$.fragment,i),a=!0)},o:function(i){B(o.$$.fragment,i),a=!1},d:function(i){i&&G(t),N(o)}};return O("SvelteRegisterBlock",{block:c,id:he.name,type:"if",source:"(70:1) {#if value === null}",ctx:l}),c}function F(l){let t,e,o,a,c,u,i,m,g,b;e=new ue({$$inline:!0}),e.$on("clear",l[17]);let w=l[5];L(w);let f=[];for(let d=0;d<w.length;d+=1)f[d]=J(te(l,w,d));const _={c:function(){t=P("div"),C(e.$$.fragment),o=U(),a=P("img"),u=U(),i=P("div");for(let s=0;s<f.length;s+=1)f[s].c();p(a,"class","w-full object-contain h-[calc(100%-50px)] s-QzgPMAMVqUOn"),j(a.src,c=l[5][l[7]])||p(a,"src",c),p(a,"alt",""),z(a,E,84,4,2812),p(i,"class","absolute h-[60px] bg-white dark:bg-gray-900 overflow-x-scroll scroll-hide w-full bottom-0 flex gap-1.5 items-center py-2 text-sm px-3 justify-center s-QzgPMAMVqUOn"),z(i,E,91,4,2975),p(t,"class","absolute inset-0 z-10 flex flex-col bg-white/90 dark:bg-gray-900 backdrop-blur h-full s-QzgPMAMVqUOn"),y(t,"min-h-[350px]",l[6].height!=="auto"),y(t,"max-h-[55vh]",l[6].height!=="auto"),y(t,"xl:min-h-[450px]",l[6].height!=="auto"),z(t,E,75,3,2457)},m:function(s,r){M(s,t,r),D(e,t,null),A(t,o),A(t,a),A(t,u),A(t,i);for(let h=0;h<f.length;h+=1)f[h].m(i,null);l[21](i),m=!0,g||(b=[I(a,"click",l[18],!1,!1,!1),I(t,"keydown",l[15],!1,!1,!1)],g=!0)},p:function(s,r){if((!m||r[0]&160&&!j(a.src,c=s[5][s[7]]))&&p(a,"src",c),r[0]&1184){w=s[5],L(w);let h;for(h=0;h<w.length;h+=1){const v=te(s,w,h);f[h]?f[h].p(v,r):(f[h]=J(v),f[h].c(),f[h].m(i,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=w.length}r[0]&64&&y(t,"min-h-[350px]",s[6].height!=="auto"),r[0]&64&&y(t,"max-h-[55vh]",s[6].height!=="auto"),r[0]&64&&y(t,"xl:min-h-[450px]",s[6].height!=="auto")},i:function(s){m||(q(e.$$.fragment,s),m=!0)},o:function(s){B(e.$$.fragment,s),m=!1},d:function(s){s&&G(t),N(e),ie(f,s),l[21](null),g=!1,Re(b)}};return O("SvelteRegisterBlock",{block:_,id:F.name,type:"if",source:"(75:2) {#if selected_image !== null}",ctx:l}),_}function J(l){let t=console.log+"",e,o,a,c,u,i,m,g=l[29],b,w;const f=()=>l[19](a,g),_=()=>l[19](null,g);function d(){return l[20](l[29])}const s={c:function(){e=je(t),o=U(),a=P("button"),c=P("img"),i=U(),p(c,"alt",""),p(c,"class","h-full w-full overflow-hidden object-contain s-QzgPMAMVqUOn"),j(c.src,u=l[27])||p(c,"src",u),z(c,E,105,7,3522),p(a,"class",m="gallery-item !flex-none !h-9 !w-9 transition-all duration-75 "+(l[7]===l[29]?"!ring-2 !ring-orange-500 hover:!ring-orange-500":"scale-90 transform")+" s-QzgPMAMVqUOn"),z(a,E,97,6,3232)},m:function(h,v){M(h,e,v),M(h,o,v),M(h,a,v),A(a,c),A(a,i),f(),b||(w=I(a,"click",d,!1,!1,!1),b=!0)},p:function(h,v){l=h,v[0]&32&&!j(c.src,u=l[27])&&p(c,"src",u),v[0]&128&&m!==(m="gallery-item !flex-none !h-9 !w-9 transition-all duration-75 "+(l[7]===l[29]?"!ring-2 !ring-orange-500 hover:!ring-orange-500":"scale-90 transform")+" s-QzgPMAMVqUOn")&&p(a,"class",m),g!==l[29]&&(_(),g=l[29],f())},d:function(h){h&&G(e),h&&G(o),h&&G(a),_(),b=!1,w()}};return O("SvelteRegisterBlock",{block:s,id:J.name,type:"each",source:"(96:5) {#each value as image, i}",ctx:l}),s}function K(l){let t;const e={c:function(){t=P("p"),t.textContent="Empty",p(t,"class","s-QzgPMAMVqUOn"),z(t,E,136,5,4275)},m:function(a,c){M(a,t,c)},p:re,d:function(a){a&&G(t)}};return O("SvelteRegisterBlock",{block:e,id:K.name,type:"else",source:"(136:4) {:else}",ctx:l}),e}function W(l){let t,e,o,a,c,u;function i(){return l[22](l[29])}const m={c:function(){t=P("button"),e=P("img"),a=U(),p(e,"alt",""),p(e,"class","h-full w-full overflow-hidden object-contain s-QzgPMAMVqUOn"),j(e.src,o=l[27])||p(e,"src",o),z(e,E,129,6,4136),p(t,"class","gallery-item s-QzgPMAMVqUOn"),z(t,E,125,5,4016)},m:function(b,w){M(b,t,w),A(t,e),A(t,a),c||(u=I(t,"click",i,!1,!1,!1),c=!0)},p:function(b,w){l=b,w[0]&32&&!j(e.src,o=l[27])&&p(e,"src",o)},d:function(b){b&&G(t),c=!1,u()}};return O("SvelteRegisterBlock",{block:m,id:W.name,type:"each",source:"(125:4) {#each value as image, i}",ctx:l}),m}function me(l){let t,e,o,a,c,u,i,m;const g=[l[0]];let b={};for(let s=0;s<g.length;s+=1)b=Oe(b,g[s]);t=new ne({props:b,$$inline:!0}),o=new ce({props:{show_label:l[1],Icon:Y,label:l[2]||"Gallery"},$$inline:!0});const w=[he,fe],f=[];function _(s,r){return s[5]===null?0:1}c=_(l),u=f[c]=w[c](l);const d={c:function(){C(t.$$.fragment),e=U(),C(o.$$.fragment),a=U(),u.c(),i=Ue()},m:function(r,h){D(t,r,h),M(r,e,h),D(o,r,h),M(r,a,h),f[c].m(r,h),M(r,i,h),m=!0},p:function(r,h){const v=h[0]&1?Ve(g,[Qe(r[0])]):{};t.$set(v);const k={};h[0]&2&&(k.show_label=r[1]),h[0]&4&&(k.label=r[2]||"Gallery"),o.$set(k);let V=c;c=_(r),c===V?f[c].p(r,h):(oe(),B(f[V],1,1,()=>{f[V]=null}),se(),u=f[c],u?u.p(r,h):(u=f[c]=w[c](r),u.c()),q(u,1),u.m(i.parentNode,i))},i:function(r){m||(q(t.$$.fragment,r),q(o.$$.fragment,r),q(u),m=!0)},o:function(r){B(t.$$.fragment,r),B(o.$$.fragment,r),B(u),m=!1},d:function(r){N(t,r),r&&G(e),N(o,r),r&&G(a),f[c].d(r),r&&G(i)}};return O("SvelteRegisterBlock",{block:d,id:me.name,type:"slot",source:'(67:0) <Block variant=\\"solid\\" color=\\"grey\\" padding={false} {elem_id} {visible}>',ctx:l}),d}function X(l){let t,e,o,a;le(l[16]),t=new ae({props:{variant:"solid",color:"grey",padding:!1,elem_id:l[3],visible:l[4],$$slots:{default:[me]},$$scope:{ctx:l}},$$inline:!0});const c={c:function(){C(t.$$.fragment)},l:function(i){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,m){D(t,i,m),e=!0,o||(a=I(window,"resize",l[16]),o=!0)},p:function(i,m){const g={};m[0]&8&&(g.elem_id=i[3]),m[0]&16&&(g.visible=i[4]),m[0]&32231|m[1]&1&&(g.$$scope={dirty:m,ctx:i}),t.$set(g)},i:function(i){e||(q(t.$$.fragment,i),e=!0)},o:function(i){B(t.$$.fragment,i),e=!1},d:function(i){N(t,i),o=!1,a()}};return O("SvelteRegisterBlock",{block:c,id:X.name,type:"component",source:"",ctx:l}),c}function Ce(l,t,e){let o,a,c,u,{$$slots:i={},$$scope:m}=t;Be("Gallery",i,[]);let{loading_status:g}=t,{show_label:b}=t,{label:w}=t,{elem_id:f=""}=t,{visible:_=!0}=t,{value:d=null}=t,{style:s={}}=t,r=null;function h(n){switch(n.code){case"Escape":n.preventDefault(),e(7,r=null);break;case"ArrowLeft":n.preventDefault(),e(7,r=o);break;case"ArrowRight":n.preventDefault(),e(7,r=a);break}}let v=[],k;async function V(n){if(typeof n!="number")return;await x(),v[n].focus();const{left:R,width:Me}=k.getBoundingClientRect(),{left:Ge,width:Pe}=v[n].getBoundingClientRect(),Z=Ge-R+Pe/2-Me/2+k.scrollLeft;k.scrollTo({left:Z<0?0:Z,behavior:"smooth"})}let T=["","sm:","md:","lg:","xl:","2xl:"],Q=0,S=0;const ge=["loading_status","show_label","label","elem_id","visible","value","style"];Object.keys(t).forEach(n=>{!~ge.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&H.warn(`<Gallery> was created with unknown prop '${n}'`)});function _e(){e(9,S=window.innerHeight)}const de=()=>e(7,r=null),be=()=>e(7,r=a);function we(n,R){$[n?"unshift":"push"](()=>{v[R]=n,e(10,v)})}const pe=n=>e(7,r=n);function ve(n){$[n?"unshift":"push"](()=>{k=n,e(11,k)})}const ye=n=>e(7,r=u?n:r);function ke(){Q=this.clientHeight,e(8,Q)}return l.$$set=n=>{"loading_status"in n&&e(0,g=n.loading_status),"show_label"in n&&e(1,b=n.show_label),"label"in n&&e(2,w=n.label),"elem_id"in n&&e(3,f=n.elem_id),"visible"in n&&e(4,_=n.visible),"value"in n&&e(5,d=n.value),"style"in n&&e(6,s=n.style)},l.$capture_state=()=>({Block:ae,BlockLabel:ce,ModifyUpload:ue,tick:x,StatusTracker:ne,Image:Y,loading_status:g,show_label:b,label:w,elem_id:f,visible:_,value:d,style:s,selected_image:r,on_keydown:h,el:v,container:k,scroll_to_img:V,grid_map:T,height:Q,window_height:S,can_zoom:u,grid:c,next:a,previous:o}),l.$inject_state=n=>{"loading_status"in n&&e(0,g=n.loading_status),"show_label"in n&&e(1,b=n.show_label),"label"in n&&e(2,w=n.label),"elem_id"in n&&e(3,f=n.elem_id),"visible"in n&&e(4,_=n.visible),"value"in n&&e(5,d=n.value),"style"in n&&e(6,s=n.style),"selected_image"in n&&e(7,r=n.selected_image),"el"in n&&e(10,v=n.el),"container"in n&&e(11,k=n.container),"grid_map"in n&&e(26,T=n.grid_map),"height"in n&&e(8,Q=n.height),"window_height"in n&&e(9,S=n.window_height),"can_zoom"in n&&e(12,u=n.can_zoom),"grid"in n&&e(13,c=n.grid),"next"in n&&e(14,a=n.next),"previous"in n&&(o=n.previous)},t&&"$$inject"in t&&l.$inject_state(t.$$inject),l.$$.update=()=>{l.$$.dirty[0]&32&&console.log(">",d),l.$$.dirty[0]&160&&(o=((r??0)+(d?.length??0)-1)%(d?.length??0)),l.$$.dirty[0]&160&&e(14,a=((r??0)+1)%(d?.length??0)),l.$$.dirty[0]&128&&V(r),l.$$.dirty[0]&64&&e(13,c=s.grid?Array(6).fill(0).map((n,R)=>`${T[R]}grid-cols-${s.grid[R]||s.grid[s.grid.length-1]}`).join(" "):"grid-cols-3 md:grid-cols-4 lg:grid-cols-6"),l.$$.dirty[0]&768&&e(12,u=S>=Q)},[g,b,w,f,_,d,s,r,Q,S,v,k,u,c,a,h,_e,de,be,we,pe,ve,ye,ke]}class De extends ze{constructor(t){super(t),Ee(this,t,Ce,X,qe,{loading_status:0,show_label:1,label:2,elem_id:3,visible:4,value:5,style:6},null,[-1,-1]),O("SvelteRegisterComponent",{component:this,tagName:"Gallery",options:t,id:X.name});const{ctx:e}=this.$$,o=t.props||{};e[0]===void 0&&!("loading_status"in o)&&H.warn("<Gallery> was created without expected prop 'loading_status'"),e[1]===void 0&&!("show_label"in o)&&H.warn("<Gallery> was created without expected prop 'show_label'"),e[2]===void 0&&!("label"in o)&&H.warn("<Gallery> was created without expected prop 'label'")}get loading_status(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set loading_status(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get show_label(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set show_label(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get label(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set label(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get elem_id(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set elem_id(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get visible(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set visible(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get style(){throw new Error("<Gallery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set style(t){throw new Error("<Gallery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var Ke=De;const We=["static"];export{Ke as Component,We as modes};
