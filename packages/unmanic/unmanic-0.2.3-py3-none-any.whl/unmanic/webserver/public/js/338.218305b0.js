"use strict";(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[338],{7450:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ot});var i=l(9835),n=l(6970);const a={class:"q-pa-none"},o={class:"row"},s={class:"col-sm-12 col-md-10 col-lg-8"},r={class:"q-mb-none"},c={class:"q-gutter-sm"},d={key:0,class:"text-weight-bold"},u=(0,i._)("br",null,null,-1),p={class:"text-weight-bold"},m={key:1},g={key:2},h=(0,i._)("br",null,null,-1),y={class:"text-weight-bold"},b={class:"text-weight-bold"},w={key:0},f={key:1},_={class:"text-weight-bold"},k={class:"row"},q={class:"col-6 text-left"},v={class:"row"},S={class:"col-6 text-left"},$={class:"text-grey-8 q-gutter-xs"},x={class:"q-mb-none"},W={class:"q-gutter-sm"},P={key:2,class:"sub-setting"},C={class:"q-gutter-sm"},T={class:"q-gutter-sm"},L={class:"q-gutter-sm"},Q={class:"q-mb-none"},j={class:"q-gutter-sm"},Z={class:"q-mb-none"},D={class:"q-gutter-sm"},F={class:"q-mb-none"},z={class:"q-gutter-sm"},I={key:2,class:"sub-setting"},O={class:"q-gutter-sm"},H={class:"q-gutter-sm"};function R(e,t,l,R,V,U){const B=(0,i.up)("q-skeleton"),M=(0,i.up)("q-avatar"),J=(0,i.up)("q-tooltip"),K=(0,i.up)("q-item-section"),A=(0,i.up)("q-item-label"),N=(0,i.up)("q-icon"),E=(0,i.up)("q-separator"),Y=(0,i.up)("q-btn"),G=(0,i.up)("q-item"),X=(0,i.up)("q-list"),ee=(0,i.up)("q-space"),te=(0,i.up)("q-bar"),le=(0,i.up)("q-toggle"),ie=(0,i.up)("q-input"),ne=(0,i.up)("q-slider"),ae=(0,i.up)("q-form"),oe=(0,i.up)("MobileSettingsQuickNav"),se=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(se,{padding:""},{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i._)("div",o,[(0,i._)("div",s,[(0,i._)("div",{class:(0,n.C_)(e.$q.platform.is.mobile?"q-ma-sm":"q-ma-sm q-pa-md")},[(0,i.Wm)(ae,{onSubmit:U.save,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i._)("h5",r,(0,n.zw)(e.$t("components.settings.library.pathConfiguration")),1),(0,i._)("div",c,[null===V.libraryPaths?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"text"})):(0,i.kq)("",!0),(0,i.Wm)(X,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(V.libraryPaths,((t,l)=>((0,i.wg)(),(0,i.j4)(G,{key:l,"active-class":"library-path-list-item"},{default:(0,i.w5)((()=>[(0,i.Wm)(K,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{"text-color":"grey-8",icon:"source"}),(0,i.Wm)(J,null,{default:(0,i.w5)((()=>[0===l?((0,i.wg)(),(0,i.iD)("span",d,[(0,i.Uk)(" ("+(0,n.zw)(e.$t("components.settings.library.defaultLibrary"))+") ",1),u])):(0,i.kq)("",!0),(0,i._)("span",p,(0,n.zw)(e.$t("components.settings.library.path"))+":",1),t.enableRemoteOnly?((0,i.wg)(),(0,i.iD)("span",m," ("+(0,n.zw)(e.$t("components.settings.library.libraryRemoteOnlyStatus"))+") ",1)):((0,i.wg)(),(0,i.iD)("span",g,(0,n.zw)(t.path),1)),h,(0,i._)("span",y,(0,n.zw)(e.$t("components.settings.common.tags"))+":",1),(0,i.Uk)(" "+(0,n.zw)(t.tags.join(", ")||e.$t("status.none")),1)])),_:2},1024)])),_:2},1024),(0,i.Wm)(K,{class:"q-px-sm q-mx-sm"},{default:(0,i.w5)((()=>[0===l?((0,i.wg)(),(0,i.j4)(A,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.name)+" * ",1),(0,i.Wm)(J,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.defaultLibrary")),1)])),_:1})])),_:2},1024)):((0,i.wg)(),(0,i.j4)(A,{key:1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.name),1)])),_:2},1024)),(0,i.Wm)(A,{caption:"",lines:"1"},{default:(0,i.w5)((()=>[(0,i._)("span",b,(0,n.zw)(e.$t("components.settings.library.path"))+": ",1),t.enableRemoteOnly?((0,i.wg)(),(0,i.iD)("span",w," ("+(0,n.zw)(e.$t("components.settings.library.libraryRemoteOnlyStatus"))+") ",1)):((0,i.wg)(),(0,i.iD)("span",f,(0,n.zw)(t.path),1))])),_:2},1024),(0,i.Wm)(A,{caption:"",lines:"1"},{default:(0,i.w5)((()=>[(0,i._)("span",_,(0,n.zw)(e.$t("components.settings.common.tags"))+": ",1),(0,i.Uk)(" "+(0,n.zw)(t.tags.join(", ")||""),1)])),_:2},1024)])),_:2},1024),e.$q.platform.is.mobile?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(K,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(A,{lines:"1"},{default:(0,i.w5)((()=>[(0,i._)("div",k,[(0,i._)("div",q,[(0,i._)("span",{class:(0,n.C_)(t.enableScanner&&!t.enableRemoteOnly?"text-primary":"text-grey-8")},[t.enableScanner&&!t.enableRemoteOnly?((0,i.wg)(),(0,i.j4)(N,{key:0,color:"check",name:"check"})):((0,i.wg)(),(0,i.j4)(N,{key:1,color:"close",name:"close"})),(0,i.Uk)(" | "+(0,n.zw)(e.$t("components.settings.library.libraryScannerStatusLabel")),1)],2)])])])),_:2},1024),(0,i.Wm)(A,{lines:"1"},{default:(0,i.w5)((()=>[(0,i._)("div",v,[(0,i._)("div",S,[(0,i._)("span",{class:(0,n.C_)(t.enableInotify&&!t.enableRemoteOnly?"text-primary":"text-grey-8")},[t.enableInotify&&!t.enableRemoteOnly?((0,i.wg)(),(0,i.j4)(N,{key:0,color:"check",name:"check"})):((0,i.wg)(),(0,i.j4)(N,{key:1,color:"close",name:"close"})),(0,i.Uk)(" | "+(0,n.zw)(e.$t("components.settings.library.libraryFileMonitorStatusLabel")),1)],2)])])])),_:2},1024)])),_:2},1024)),(0,i.Wm)(E,{inset:"",vertical:"",class:"q-mx-sm"}),(0,i.Wm)(K,{center:"",side:""},{default:(0,i.w5)((()=>[(0,i._)("div",$,[(0,i.Wm)(Y,{flat:"",dense:"",round:"",size:"12px",color:"grey-8",icon:"tune",onClick:e=>U.configureLibraryPath(l)},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.configure")),1)])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(Y,{flat:"",dense:"",round:"",size:"12px",color:"negative",icon:"delete",disable:t.locked,onClick:e=>U.deleteLibrary(l)},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.delete")),1)])),_:1})])),_:2},1032,["disable","onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,i.Wm)(te,{class:"bg-transparent"},{default:(0,i.w5)((()=>[(0,i.Wm)(ee),(0,i.Wm)(Y,{round:"",flat:"",color:"primary",icon:"add",onClick:U.addNewLibraryWithDirectoryBrowser},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.add")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})]),(0,i.Wm)(E,{class:"q-my-lg"}),(0,i._)("h5",x,(0,n.zw)(e.$t("components.settings.library.libraryScanner")),1),(0,i._)("div",W,[null===V.enableLibraryScanner?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QToggle"})):((0,i.wg)(),(0,i.j4)(le,{key:1,modelValue:V.enableLibraryScanner,"onUpdate:modelValue":t[0]||(t[0]=e=>V.enableLibraryScanner=e),label:e.$t("components.settings.library.enableLibraryScanner")},null,8,["modelValue","label"])),V.enableLibraryScanner?((0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("div",C,[null===V.libraryScanSchedule?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QInput"})):(0,i.kq)("",!0),V.enableLibraryScanner&&null!==V.libraryScanSchedule?((0,i.wg)(),(0,i.j4)(ie,{key:1,outlined:"",type:"number",modelValue:V.libraryScanSchedule,"onUpdate:modelValue":t[1]||(t[1]=e=>V.libraryScanSchedule=e),label:e.$t("components.settings.library.libraryScannerSchedule"),"lazy-rules":"",rules:[t=>null!==t&&""!==t||e.$t("components.settings.library.libraryScannerScheduleNotValid"),t=>t>0||e.$t("components.settings.pleaseEnterAValidNumber")]},null,8,["modelValue","label","rules"])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)]),(0,i._)("div",T,[null===V.runLibraryScanOnStart?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QToggle"})):(0,i.kq)("",!0),null!==V.runLibraryScanOnStart?((0,i.wg)(),(0,i.j4)(le,{key:1,modelValue:V.runLibraryScanOnStart,"onUpdate:modelValue":t[2]||(t[2]=e=>V.runLibraryScanOnStart=e),label:e.$t("components.settings.library.runLibraryScanOnStart")},null,8,["modelValue","label"])):(0,i.kq)("",!0)]),(0,i._)("div",L,[null===V.libraryScanFollowSymlinks?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QToggle"})):(0,i.kq)("",!0),null!==V.libraryScanFollowSymlinks?((0,i.wg)(),(0,i.j4)(le,{key:1,modelValue:V.libraryScanFollowSymlinks,"onUpdate:modelValue":t[3]||(t[3]=e=>V.libraryScanFollowSymlinks=e),label:e.$t("components.settings.library.followSymlinks")},null,8,["modelValue","label"])):(0,i.kq)("",!0)]),(0,i.Wm)(E,{class:"q-my-lg"}),(0,i._)("h5",Q,(0,n.zw)(e.$t("components.settings.library.fileTesting")),1),(0,i._)("div",j,[null===V.concurrentFileTesters?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QInput"})):(0,i.kq)("",!0),null!==V.concurrentFileTesters?((0,i.wg)(),(0,i.j4)(ie,{key:1,readonly:"",outlined:"",color:"primary",modelValue:V.concurrentFileTesters,"onUpdate:modelValue":t[4]||(t[4]=e=>V.concurrentFileTesters=e),label:e.$t("components.settings.library.concurrentFileTesters"),placeholder:V.concurrentFileTesters},null,8,["modelValue","label","placeholder"])):(0,i.kq)("",!0),null===V.concurrentFileTesters?((0,i.wg)(),(0,i.j4)(B,{key:2,type:"QSlider"})):(0,i.kq)("",!0),null!==V.concurrentFileTesters?((0,i.wg)(),(0,i.j4)(ne,{key:3,modelValue:V.concurrentFileTesters,"onUpdate:modelValue":t[5]||(t[5]=e=>V.concurrentFileTesters=e),min:1,max:10,step:1,color:"primary"},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)(E,{class:"q-my-lg"}),(0,i._)("h5",Z,(0,n.zw)(e.$t("components.settings.library.pendingTasks")),1),(0,i._)("div",D,[null===V.clearPendingTasksOnStart?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QToggle"})):((0,i.wg)(),(0,i.j4)(le,{key:1,modelValue:V.clearPendingTasksOnStart,"onUpdate:modelValue":t[6]||(t[6]=e=>V.clearPendingTasksOnStart=e),label:e.$t("components.settings.library.clearPendingTasksOnStart")},null,8,["modelValue","label"]))]),(0,i.Wm)(E,{class:"q-my-lg"}),(0,i._)("h5",F,(0,n.zw)(e.$t("components.settings.library.completedTasks")),1),(0,i._)("div",z,[null===V.autoManageCompletedTasks?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QToggle"})):((0,i.wg)(),(0,i.j4)(le,{key:1,modelValue:V.autoManageCompletedTasks,"onUpdate:modelValue":t[7]||(t[7]=e=>V.autoManageCompletedTasks=e),label:e.$t("components.settings.library.autoManageCompletedTasks")},null,8,["modelValue","label"])),V.autoManageCompletedTasks?((0,i.wg)(),(0,i.iD)("div",I,[(0,i._)("div",O,[null===V.maxAgeOfCompletedTasks?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QInput"})):(0,i.kq)("",!0),V.autoManageCompletedTasks&&null!==V.maxAgeOfCompletedTasks?((0,i.wg)(),(0,i.j4)(ie,{key:1,outlined:"",type:"number",modelValue:V.maxAgeOfCompletedTasks,"onUpdate:modelValue":t[8]||(t[8]=e=>V.maxAgeOfCompletedTasks=e),label:e.$t("components.settings.library.maxAgeOfCompletedTasks"),"lazy-rules":"",rules:[t=>null!==t&&""!==t||e.$t("components.settings.pleaseEnterAValidNumber"),t=>t>0||e.$t("components.settings.pleaseEnterAValidNumber")]},null,8,["modelValue","label","rules"])):(0,i.kq)("",!0)]),(0,i._)("div",H,[null===V.alwaysKeepFailedTasks?((0,i.wg)(),(0,i.j4)(B,{key:0,type:"QInput"})):((0,i.wg)(),(0,i.j4)(le,{key:1,modelValue:V.alwaysKeepFailedTasks,"onUpdate:modelValue":t[9]||(t[9]=e=>V.alwaysKeepFailedTasks=e),label:e.$t("components.settings.library.alwaysKeepFailedTasks")},null,8,["modelValue","label"]))])])):(0,i.kq)("",!0)]),(0,i._)("div",null,[(0,i.Wm)(Y,{label:e.$t("navigation.submit"),type:"submit",color:"secondary"},null,8,["label"])])])),_:1},8,["onSubmit"])],2)])]),(0,i.Wm)(oe,{prevEnabled:!1,prevLabel:"none",prevPath:"/ui/settings-plugins",nextEnabled:!0,nextLabel:e.$t("navigation.workers"),nextPath:"/ui/settings-workers"},null,8,["nextLabel"])])])),_:1})}var V=l(586),U=l(499),B=l(9302),M=l(9991),J=l(9370),K=l(9981),A=l.n(K),N=l(6888),E=l(1957);const Y={class:"row items-center no-wrap"},G={key:0,class:"col"},X={class:"col"},ee={class:"text-h6 text-blue-10"},te={key:1,class:"col-auto"},le={class:"row items-center no-wrap q-mb-md"},ie={class:"col"},ne={class:"text-h5"},ae={class:"col-auto"},oe={class:"q-pb-sm"},se={key:0,class:"q-pb-sm"},re={class:"row items-center all-pointer-events"},ce={class:"q-pb-sm"},de={key:1,class:"q-pb-sm"},ue={key:2,class:"q-pb-sm"},pe={class:"q-pb-sm"},me={class:"q-pb-sm"},ge={class:"row items-center no-wrap q-mb-md"},he={class:"col"},ye={class:"text-h6"},be={class:"q-gutter-sm"},we={class:"text-grey-8 q-gutter-xs"},fe={class:"text-h6"};function _e(e,t,l,a,o,s){const r=(0,i.up)("q-btn"),c=(0,i.up)("q-tooltip"),d=(0,i.up)("q-card-section"),u=(0,i.up)("q-skeleton"),p=(0,i.up)("q-input"),m=(0,i.up)("q-icon"),g=(0,i.up)("q-item-label"),h=(0,i.up)("q-item-section"),y=(0,i.up)("q-toggle"),b=(0,i.up)("q-item"),w=(0,i.up)("q-select"),f=(0,i.up)("q-separator"),_=(0,i.up)("q-img"),k=(0,i.up)("q-list"),q=(0,i.up)("q-space"),v=(0,i.up)("q-bar"),S=(0,i.up)("LibraryConfigurePluginFlowList"),$=(0,i.up)("q-card"),x=(0,i.up)("PluginInfo"),W=(0,i.up)("q-dialog"),P=(0,i.Q2)("close-popup"),C=(0,i.Q2)("touch-swipe");return(0,i.wg)(),(0,i.j4)(W,{ref:"libraryConfigureDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":e.$q.platform.is.mobile?"jump-left":"slide-left","transition-hide":e.$q.platform.is.mobile?"jump-right":"slide-right","full-height":"",position:"right",onBeforeHide:s.beforeDialogHide,onHide:s.onDialogHide},{default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)($,{style:(0,n.j5)([e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}])},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"bg-card-head"},{default:(0,i.w5)((()=>[(0,i._)("div",Y,[e.$q.platform.is.mobile?((0,i.wg)(),(0,i.iD)("div",G,[(0,i.wy)((0,i.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[P]])])):(0,i.kq)("",!0),(0,i._)("div",X,[(0,i._)("div",ee,(0,n.zw)(l.dialogHeader),1)]),e.$q.platform.is.mobile?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",te,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_forward"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1})),[[P]])]))])])),_:1}),(0,i.Wm)(d,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,n.C_)(e.$q.platform.is.mobile?"q-px-none":"")},[(0,i.Wm)($,{flat:""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:(0,n.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,i.w5)((()=>[(0,i._)("div",le,[(0,i._)("div",ie,[(0,i._)("div",ne,(0,n.zw)(e.$t("components.settings.common.configuration")),1)]),(0,i._)("div",ae,[(0,i.Wm)(r,{round:"",flat:"",color:"primary",icon:"download",onClick:s.exportPluginConfig},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.exportLibraryConfig")),1)])),_:1})])),_:1},8,["onClick"]),(0,i.Wm)(r,{round:"",flat:"",color:"primary",icon:"publish",onClick:s.importPluginConfig},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.importLibraryConfig")),1)])),_:1})])),_:1},8,["onClick"]),(0,i.Wm)(r,{round:"",flat:"",color:"primary",icon:"content_copy",onClick:s.cloneLibrary},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.cloneLibrary")),1)])),_:1})])),_:1},8,["onClick"]),e.locked?((0,i.wg)(),(0,i.j4)(r,{key:0,round:"",flat:"",color:"negative",icon:"lock",onClick:t[0]||(t[0]=t=>e.locked=!1)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.locked")),1)])),_:1})])),_:1})):((0,i.wg)(),(0,i.j4)(r,{key:1,round:"",flat:"",color:"primary",icon:"lock_open",onClick:t[1]||(t[1]=t=>e.locked=!0)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.unlocked")),1)])),_:1})])),_:1}))])]),(0,i._)("div",oe,[null===e.name?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"QInput"})):(0,i.kq)("",!0),null!==e.name?((0,i.wg)(),(0,i.j4)(p,{key:1,outlined:"",color:"primary",modelValue:e.name,"onUpdate:modelValue":t[2]||(t[2]=t=>e.name=t),label:e.$t("components.settings.library.name"),placeholder:e.name},null,8,["modelValue","label","placeholder"])):(0,i.kq)("",!0)]),!0!==e.enableReceiveRemoteFilesOnly?((0,i.wg)(),(0,i.iD)("div",se,[null===e.path?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"QInput"})):((0,i.wg)(),(0,i.j4)(p,{key:1,readonly:"",outlined:"",color:"primary",modelValue:e.path,"onUpdate:modelValue":t[3]||(t[3]=t=>e.path=t),"label-slot":"",placeholder:e.path,disable:!0===e.enableReceiveRemoteFilesOnly,onClick:s.updateLibraryWithDirectoryBrowser},{label:(0,i.w5)((()=>[(0,i._)("div",re,(0,n.zw)(e.$t("components.settings.library.path")),1)])),append:(0,i.w5)((()=>[(0,i.Wm)(m,{onClick:s.updateLibraryWithDirectoryBrowser,class:"cursor-pointer",name:"folder_open"},null,8,["onClick"])])),_:1},8,["modelValue","placeholder","disable","onClick"])),!0===e.enableReceiveRemoteFilesOnly?((0,i.wg)(),(0,i.j4)(c,{key:2,class:"bg-white text-primary",anchor:"bottom left",self:"bottom left"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.pathDisabledReceiveRemoteFilesOnly")),1)])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",ce,[null===e.enableReceiveRemoteFilesOnly?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"QToggle"})):((0,i.wg)(),(0,i.j4)(b,{key:1,tag:"label",class:"border-hover",style:{"padding-left":"12px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.enableReceiveRemoteFilesOnly")),1)])),_:1})])),_:1}),(0,i.Wm)(h,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:e.enableReceiveRemoteFilesOnly,"onUpdate:modelValue":t[4]||(t[4]=t=>e.enableReceiveRemoteFilesOnly=t)},null,8,["modelValue"])])),_:1})])),_:1}))]),!0!==e.enableReceiveRemoteFilesOnly?((0,i.wg)(),(0,i.iD)("div",de,[null===e.enableScanner?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"QToggle"})):((0,i.wg)(),(0,i.j4)(b,{key:1,tag:"label",class:"border-hover",style:{"padding-left":"12px"},disable:!0===e.enableReceiveRemoteFilesOnly},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.enableScanner")),1)])),_:1})])),_:1}),(0,i.Wm)(h,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:e.enableScanner,"onUpdate:modelValue":t[5]||(t[5]=t=>e.enableScanner=t),disable:!0===e.enableReceiveRemoteFilesOnly},null,8,["modelValue","disable"])])),_:1})])),_:1},8,["disable"])),!0===e.enableReceiveRemoteFilesOnly?((0,i.wg)(),(0,i.j4)(c,{key:2,class:"bg-white text-primary",anchor:"bottom left",self:"bottom left"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.pathDisabledReceiveRemoteFilesOnly")),1)])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),!0!==e.enableReceiveRemoteFilesOnly?((0,i.wg)(),(0,i.iD)("div",ue,[null===e.enableInotify?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"QToggle"})):((0,i.wg)(),(0,i.j4)(b,{key:1,tag:"label",class:"border-hover",style:{"padding-left":"12px"},disable:!0===e.enableReceiveRemoteFilesOnly},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.enableInotify")),1)])),_:1})])),_:1}),(0,i.Wm)(h,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:e.enableInotify,"onUpdate:modelValue":t[6]||(t[6]=t=>e.enableInotify=t),disable:!0===e.enableReceiveRemoteFilesOnly},null,8,["modelValue","disable"])])),_:1})])),_:1},8,["disable"])),!0===e.enableReceiveRemoteFilesOnly?((0,i.wg)(),(0,i.j4)(c,{key:2,class:"bg-white text-primary",anchor:"bottom left",self:"bottom left"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.pathDisabledReceiveRemoteFilesOnly")),1)])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",pe,[null===e.priorityScore?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"QInput"})):(0,i.kq)("",!0),null!==e.priorityScore?((0,i.wg)(),(0,i.j4)(p,{key:1,outlined:"",color:"primary",modelValue:e.priorityScore,"onUpdate:modelValue":t[7]||(t[7]=t=>e.priorityScore=t),modelModifiers:{number:!0},label:e.$t("components.settings.library.priorityScore"),type:"number"},null,8,["modelValue","label"])):(0,i.kq)("",!0)]),(0,i._)("div",me,[null===e.tags?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"QInput"})):(0,i.kq)("",!0),(0,i.Wm)(w,{filled:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",modelValue:e.tags,"onUpdate:modelValue":t[8]||(t[8]=t=>e.tags=t),label:e.$t("components.settings.common.tags"),onKeyup:(0,E.D2)(s.addTag,["tab"])},null,8,["modelValue","label","onKeyup"])])])),_:1},8,["class"]),(0,i.Wm)(f),(0,i.Wm)(d,{class:(0,n.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,i.w5)((()=>[(0,i._)("div",ge,[(0,i._)("div",he,[(0,i._)("div",ye,(0,n.zw)(e.$t("components.settings.library.plugins")),1)])]),(0,i._)("div",be,[null===e.enabledPlugins?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"text"})):(0,i.kq)("",!0),(0,i.Wm)(k,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.enabledPlugins,((t,l)=>((0,i.wg)(),(0,i.iD)("div",{key:l},[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{src:t.icon},null,8,["src"])])),_:2},1024),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.name),1)])),_:2},1024),(0,i.Wm)(g,{caption:"",lines:"2"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.description),1)])),_:2},1024)])),_:2},1024),(0,i.Wm)(f,{inset:"",vertical:"",class:"q-mx-sm"}),(0,i.Wm)(h,{center:"",side:""},{default:(0,i.w5)((()=>[(0,i._)("div",we,[(0,i.Wm)(r,{flat:"",dense:"",round:"",size:"12px",color:"grey-8",icon:"tune",disable:!t.has_config,onClick:l=>e.showPluginSettings=t.plugin_id},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.configureForThisLibrary")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,i.Wm)(r,{flat:"",dense:"",round:"",size:"12px",color:"negative",icon:"remove_circle_outline",onClick:e=>s.removePluginFromList(l)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.removeFromThisLibrary")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024)])))),128))])),_:1}),(0,i.Wm)(v,{class:"bg-transparent q-mb-sm"},{default:(0,i.w5)((()=>[(0,i.Wm)(q),(0,i.Wm)(r,{round:"",flat:"",color:"primary",icon:"add",onClick:s.selectPluginFromList},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("components.settings.library.addPluginToThisLibrary")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})]),(0,i._)("div",fe,(0,n.zw)(e.$t("components.settings.library.pluginFlow")),1),((0,i.wg)(),(0,i.j4)(S,{libraryId:l.libraryId,key:e.componentKey},null,8,["libraryId"]))])),_:1},8,["class"])])),_:1})],2)])),_:1})])),_:1},8,["style"])),[[C,s.hide,void 0,{touch:!0,right:!0}]]),(0,i.Wm)(x,{showPluginSettings:e.showPluginSettings,libraryId:l.libraryId,onHide:s.closePluginInfo},null,8,["showPluginSettings","libraryId","onHide"])])),_:1},8,["maximized","transition-show","transition-hide","onBeforeHide","onHide"])}var ke=l(6225);const qe={class:"row items-center no-wrap"},ve={key:0,class:"col"},Se={class:"col"},$e={class:"text-h6 text-blue-10"},xe={key:1,class:"col-auto"},We={class:"row q-gutter-xs q-mt-xs justify-between"},Pe={class:"col-auto"},Ce={class:"col-auto",style:{"max-width":"200px"}};function Te(e,t,l,a,o,s){const r=(0,i.up)("q-btn"),c=(0,i.up)("q-tooltip"),d=(0,i.up)("q-card-section"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-input"),m=(0,i.up)("q-separator"),g=(0,i.up)("q-img"),h=(0,i.up)("q-item-section"),y=(0,i.up)("q-item-label"),b=(0,i.up)("q-item"),w=(0,i.up)("q-list"),f=(0,i.up)("q-card"),_=(0,i.up)("q-dialog"),k=(0,i.Q2)("close-popup"),q=(0,i.Q2)("ripple"),v=(0,i.Q2)("touch-swipe");return(0,i.wg)(),(0,i.j4)(_,{ref:"pluginSelectorDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"jump-left","transition-hide":"jump-right","full-height":"",onHide:s.onDialogHide},{default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(f,{style:(0,n.j5)([e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}])},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"bg-card-head"},{default:(0,i.w5)((()=>[(0,i._)("div",qe,[e.$q.platform.is.mobile?((0,i.wg)(),(0,i.iD)("div",ve,[(0,i.wy)((0,i.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[k]])])):(0,i.kq)("",!0),(0,i._)("div",Se,[(0,i._)("div",$e,(0,n.zw)(l.dialogHeader),1)]),e.$q.platform.is.mobile?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",xe,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1})),[[k]])]))])])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i._)("div",We,[(0,i._)("div",Pe,[(0,i.Wm)(r,{onClick:s.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPlugins")},null,8,["onClick","label"])]),(0,i._)("div",Ce,[(0,i.Wm)(p,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),placeholder:e.$t("navigation.search"),onUpdate:s.fetchPluginsList},{append:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue","placeholder","onUpdate"])])])])),_:1}),(0,i.Wm)(d,{class:(0,n.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{flat:""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"q-pa-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{bordered:"",padding:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{spaced:"",inset:""}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.plugins,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{clickable:"",onClick:t=>s.selectPlugin(e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{src:e.icon},null,8,["src"])])),_:2},1024),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.name),1)])),_:2},1024),(0,i.Wm)(y,{caption:"",lines:"2"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[q]]),(0,i.Wm)(m,{spaced:"",inset:""})])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1},8,["style"])),[[v,s.hide,void 0,{touch:!0,left:!0,right:!0}]])])),_:1},8,["maximized","onHide"])}var Le=l(282);const Qe={name:"PluginSelectorDialog",props:{dialogHeader:{type:String,default:" --- header --- "},hidePlugins:{type:Array}},emits:["ok","hide","path"],methods:{show(){this.$refs.pluginSelectorDialogRef.show(),this.fetchPluginsList()},hide(){this.$refs.pluginSelectorDialogRef.hide()},onDialogHide(){this.$emit("ok",{selectedPlugin:this.currentPlugin}),this.$emit("hide")},fetchPluginsList:function(){let e={start:0,length:1e3,search_value:this.filter,order_by:"name",order_direction:"asc"};A()({method:"post",url:(0,N.J4)("v2","plugins/installed"),data:e}).then((e=>{let t=e.data.results,l=[];for(let i=0;i<t.length;i++)this.hidePlugins.indexOf(t[i].plugin_id)>-1||(l[l.length]={plugin_id:t[i].plugin_id,name:t[i].name,author:t[i].author,description:t[i].description,version:t[i].version,icon:t[i].icon,tags:t[i].tags,has_config:t[i].has_config});this.plugins=l}))},selectPlugin(e){this.currentPlugin=e,this.hide()},openPluginInstaller(){this.$q.dialog({component:Le.Z,componentProps:{}}).onOk((e=>{})).onDismiss((()=>{this.fetchPluginsList()}))}},watch:{initialPath(e){e.length>0&&(this.currentPlugin=this.initialPath)},filter(e){this.fetchPluginsList()}},data:function(){return{maximizedToggle:!0,currentPlugin:(0,U.iH)(null),plugins:(0,U.iH)([]),filter:(0,U.iH)("")}}};var je=l(1639),Ze=l(2074),De=l(4458),Fe=l(3190),ze=l(8879),Ie=l(6858),Oe=l(6611),He=l(2857),Re=l(3246),Ve=l(926),Ue=l(490),Be=l(1233),Me=l(335),Je=l(3115),Ke=l(4871),Ae=l(2146),Ne=l(1136),Ee=l(9984),Ye=l.n(Ee);const Ge=(0,je.Z)(Qe,[["render",Te]]),Xe=Ge;Ye()(Qe,"components",{QDialog:Ze.Z,QCard:De.Z,QCardSection:Fe.Z,QBtn:ze.Z,QTooltip:Ie.Z,QInput:Oe.Z,QIcon:He.Z,QList:Re.Z,QSeparator:Ve.Z,QItem:Ue.Z,QItemSection:Be.Z,QImg:Me.Z,QItemLabel:Je.Z}),Ye()(Qe,"directives",{TouchSwipe:Ke.Z,ClosePopup:Ae.Z,Ripple:Ne.Z});const et={class:"q-gutter-sm"},tt={class:"row"},lt={class:"text-weight-medium q-ml-sm"},it={class:"text-weight-medium"};function nt(e,t,l,a,o,s){const r=(0,i.up)("q-tooltip"),c=(0,i.up)("q-icon"),d=(0,i.up)("q-avatar"),u=(0,i.up)("q-item-section"),p=(0,i.up)("q-separator"),m=(0,i.up)("q-skeleton"),g=(0,i.up)("q-img"),h=(0,i.up)("q-item-label"),y=(0,i.up)("q-item"),b=(0,i.up)("draggable"),w=(0,i.up)("q-list"),f=(0,i.up)("q-card-section"),_=(0,i.up)("q-card"),k=(0,i.up)("q-expansion-item");return(0,i.wg)(),(0,i.iD)("div",et,[(0,i.Wm)(w,{style:{width:"100%"}},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.pluginTypes,(t=>((0,i.wg)(),(0,i.j4)(k,(0,i.dG)({key:t.type},t,{group:"pluginTypes",icon:"list_alt",label:e.$t(t.labelCode).length<50?e.$t(t.labelCode):e.$t(t.labelCode).substring(0,48)+"..",caption:e.$t(t.labelCode+"Caption")!==t.labelCode+"Caption"?e.$t(t.labelCode+"Caption"):"","caption-lines":"4",class:"text-h8 text-primary"}),{default:(0,i.w5)((()=>[(0,i.Wm)(_,{inline:"",style:{},class:"q-ma-lg-xs q-pa-lg-sm q-pa-sm-none"},{default:(0,i.w5)((()=>[(0,i._)("div",tt,[(0,i.Wm)(f,{class:"col justify-center full-height full-width text-center q-px-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{bordered:"",class:"rounded-borders q-pl-none",style:{}},{default:(0,i.w5)((()=>[(0,i.Wm)(b,(0,i.dG)({class:"library-plugin-flow-group","item-key":"order",tag:"transition-group","component-data":{tag:"ul",name:"flip-list",type:"transition"},modelValue:e.pluginFlowByType[t.type],"onUpdate:modelValue":l=>e.pluginFlowByType[t.type]=l},s.dragOptions,{onEnd:e=>s.savePluginFlow(t.type)}),{item:(0,i.w5)((({element:t,index:l})=>[((0,i.wg)(),(0,i.j4)(y,{key:l,class:"q-px-none rounded-borders","active-class":"library-plugin-flow-item"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{avatar:"",class:"q-px-sm q-mx-sm"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{rounded:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"drag_handle",class:"",style:{"max-width":"30px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.move")),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(p,{inset:"",vertical:"",class:"q-mr-sm"}),(0,i.Wm)(u,{top:"",class:"q-mx-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{lines:"1",class:"text-left"},{default:(0,i.w5)((()=>[t.icon?((0,i.wg)(),(0,i.j4)(d,{key:1,rounded:"",size:"35px"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{src:t.icon,class:"",style:{"max-width":"30px"}},null,8,["src"])])),_:2},1024)):((0,i.wg)(),(0,i.j4)(m,{key:0,width:"35px",height:"35px"})),(0,i._)("span",lt,(0,n.zw)(t.name),1)])),_:2},1024),(0,i.Wm)(h,{caption:"",lines:"1",class:"text-left q-ml-sm"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.description),1)])),_:2},1024),(0,i.Wm)(r,{anchor:"center middle",self:"center middle",class:"bg-white text-primary lt-sm"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.name),1)])),_:2},1024)])),_:2},1024),(0,i.Wm)(p,{inset:"",vertical:"",class:"gt-xs q-mx-sm"}),(0,i.Wm)(u,{side:"",class:"gt-xs q-px-sm"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{lines:"1",class:"text-left"},{default:(0,i.w5)((()=>[(0,i._)("span",it,(0,n.zw)(l+1),1),(0,i.Wm)(r,{anchor:"center right",self:"center left",class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.position")),1)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1040,["modelValue","onUpdate:modelValue","onEnd"])])),_:2},1024)])),_:2},1024)])])),_:2},1024)])),_:2},1040,["label","caption"])))),128))])),_:1})])}var at=l(3130),ot=l.n(at);const st={name:"LibraryConfigurePluginFlowList",components:{draggable:ot()},props:{libraryId:{type:Number,required:!1}},methods:{fetchPluginTypes:function(){A()({method:"get",url:(0,N.J4)("v2","plugins/flow/types")}).then((e=>{let t=e.data.results,l=[];for(let i=0;i<t.length;i++){let e=t[i].split("_").map(((e,t)=>0===t?e:e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");l[l.length]={type:t[i],labelCode:"components.plugins.types."+e}}this.pluginTypes=l,this.fetchPluginFlow()}))},fetchPluginFlow:function(){for(let e=0;e<this.pluginTypes.length;e++){let t={plugin_type:this.pluginTypes[e].type,library_id:this.libraryId};A()({method:"post",url:(0,N.J4)("v2","plugins/flow"),data:t}).then((t=>{this.pluginFlowByType[this.pluginTypes[e].type]=t.data.results}))}},savePluginFlow:function(e){let t={plugin_type:e,plugin_flow:this.pluginFlowByType[e],library_id:this.libraryId};A()({method:"post",url:(0,N.J4)("v2","plugins/flow/save"),data:t}).then((e=>{})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("components.plugins.errorSavingFlow"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},movePluginInFlow:function(e,t,l,i){let n,a=this.pluginFlowByType[e].slice();if("up"===i){if(0===t)return void console.debug("Cannot move up - already at the top");n=t-1}if("down"===i&&(n=t+1,n===a.length))return void console.debug("Cannot move down - already at the bottom");let o=a[t];a.splice(t,1),a.splice(n,0,o),this.pluginFlowByType[e]=a,this.savePluginFlow(e)}},created(){this.fetchPluginTypes()},data:function(){return{options:{dropzoneSelector:".q-list",draggableSelector:".q-item"},pluginTypes:(0,U.iH)([]),pluginFlowByType:(0,U.iH)({}),files:(0,U.iH)([])}},computed:{dragOptions(){return{animation:100,group:"pluginFlow",disabled:!1,ghostClass:"ghost",direction:"vertical",delay:200,delayOnTouchOnly:!0}}},setup(){return{}}};var rt=l(1123),ct=l(1357),dt=l(7133);const ut=(0,je.Z)(st,[["render",nt]]),pt=ut;Ye()(st,"components",{QList:Re.Z,QExpansionItem:rt.Z,QCard:De.Z,QCardSection:Fe.Z,QItem:Ue.Z,QItemSection:Be.Z,QAvatar:ct.Z,QIcon:He.Z,QTooltip:Ie.Z,QSeparator:Ve.Z,QSkeleton:dt.ZP,QImg:Me.Z,QItemLabel:Je.Z});const mt={class:"row items-center no-wrap"},gt={key:0,class:"col"},ht={class:"col"},yt={class:"text-h6 text-blue-10"},bt={key:1,class:"col-auto"},wt={key:0},ft={class:"q-mt-md float-right"};function _t(e,t,l,a,o,s){const r=(0,i.up)("q-btn"),c=(0,i.up)("q-tooltip"),d=(0,i.up)("q-card-section"),u=(0,i.up)("q-input"),p=(0,i.up)("q-card"),m=(0,i.up)("q-dialog"),g=(0,i.Q2)("close-popup"),h=(0,i.Q2)("touch-swipe");return(0,i.wg)(),(0,i.j4)(m,{ref:"jsonDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"jump-left","transition-hide":"jump-right","full-height":"",onHide:s.onDialogHide},{default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(p,{style:(0,n.j5)([e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}])},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"bg-card-head"},{default:(0,i.w5)((()=>[(0,i._)("div",mt,[e.$q.platform.is.mobile?((0,i.wg)(),(0,i.iD)("div",gt,[(0,i.wy)((0,i.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[g]])])):(0,i.kq)("",!0),(0,i._)("div",ht,[(0,i._)("div",yt,(0,n.zw)(l.dialogHeader),1)]),e.$q.platform.is.mobile?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",bt,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1})),[[g]])]))])])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",bordered:"",class:"q-pa-sm",style:{width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"q-pt-none"},{default:(0,i.w5)((()=>["export"===l.mode?((0,i.wg)(),(0,i.iD)("pre",wt,(0,n.zw)(l.jsonData),1)):((0,i.wg)(),(0,i.j4)(u,{key:1,modelValue:e.importString,"onUpdate:modelValue":t[0]||(t[0]=t=>e.importString=t),rows:"30",type:"textarea"},null,8,["modelValue"]))])),_:1})])),_:1})])),_:1}),(0,i.Wm)(d,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i._)("div",ft,["export"===l.mode?((0,i.wg)(),(0,i.j4)(r,{key:0,label:e.$t("navigation.copy"),color:"secondary",onClick:s.copyJson},null,8,["label","onClick"])):((0,i.wg)(),(0,i.j4)(r,{key:1,label:e.$t("navigation.submit"),color:"secondary",onClick:s.hide},null,8,["label","onClick"]))])])),_:1})])),_:1},8,["style"])),[[h,s.hide,void 0,{touch:!0,left:!0,right:!0}]])])),_:1},8,["maximized","onHide"])}var kt=l(5054);const qt={props:{dialogHeader:{type:String,default:" --- header --- ",required:!0},jsonData:{type:String,default:" --- jsonData --- ",required:!0},mode:{type:String,default:"export",required:!0}},emits:["ok","hide"],methods:{show(){this.$refs.jsonDialogRef.show()},hide(){this.$refs.jsonDialogRef.hide()},onDialogHide(){this.$emit("ok",{importString:this.importString}),this.$emit("hide")},copyJson(){(0,kt.Z)(this.jsonData).then((()=>{this.$q.notify({color:"secondary",position:"top",message:this.$t("notifications.copied"),timeout:200})})).catch((()=>{}))}},data:function(){return{maximizedToggle:!0,importString:(0,U.iH)(null)}}},vt=(0,je.Z)(qt,[["render",_t]]),St=vt;Ye()(qt,"components",{QDialog:Ze.Z,QCard:De.Z,QCardSection:Fe.Z,QBtn:ze.Z,QTooltip:Ie.Z,QInput:Oe.Z}),Ye()(qt,"directives",{TouchSwipe:Ke.Z,ClosePopup:Ae.Z});var $t=l(6950);const xt={name:"LibraryConfigureDialog",components:{LibraryConfigurePluginFlowList:pt,PluginInfo:ke.Z},props:{dialogHeader:{type:String,default:" --- header --- "},libraryId:{type:Number,default:0}},emits:["ok","hide","path"],methods:{show(){this.$refs.libraryConfigureDialogRef.show(),this.fetchLibraryConfig(this.libraryId)},hide(){this.$refs.libraryConfigureDialogRef.hide()},onDialogHide(){this.$emit("ok",{}),this.$emit("hide")},beforeDialogHide(){this.saveLibraryConfig()},fetchLibraryConfig:function(e){let t={id:e};A()({method:"post",url:(0,N.J4)("v2","settings/library/read"),data:t}).then((e=>{let t=e.data.library_config;this.currentID=t.id,this.locked=t.locked,this.name=t.name,this.path=t.path,this.enableReceiveRemoteFilesOnly=t.enable_remote_only,this.enableScanner=t.enable_scanner,this.enableInotify=t.enable_inotify,this.priorityScore=t.priority_score,this.tags=t.tags,this.enabledPlugins=e.data.plugins.enabled_plugins}))},saveLibraryConfig:function(){let e={library_config:{id:this.currentID,locked:this.locked,name:this.name,path:this.path,enable_remote_only:this.enableReceiveRemoteFilesOnly,enable_scanner:this.enableScanner,enable_inotify:this.enableInotify,priority_score:this.priorityScore,tags:this.tags},plugins:{enabled_plugins:this.enabledPlugins}};A()({method:"post",url:(0,N.J4)("v2","settings/library/write"),data:e}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.componentKey+=1})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},addTag:function(){this.newTag&&(this.tags[this.tags.length]=this.newTag,this.newTag=null)},deleteTag:function(e){for(let t=0;t<this.tags.length;t++)this.tags[t]===e&&this.tags.splice(t,1)},updateLibraryWithDirectoryBrowser:function(){this.$q.dialog({component:J.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:this.path,listType:"directories"}}).onOk((e=>{"undefined"!==typeof e.selectedPath&&null!==e.selectedPath&&(this.path=e.selectedPath)})).onDismiss((()=>{}))},selectPluginFromList:function(){let e=[];for(let t=0;t<this.enabledPlugins.length;t++)e[e.length]=this.enabledPlugins[t].plugin_id;this.$q.dialog({component:Xe,componentProps:{dialogHeader:this.$t("headers.selectPlugin"),hidePlugins:e}}).onOk((e=>{if("undefined"!==typeof e.selectedPlugin&&null!==e.selectedPlugin){let t=this.enabledPlugins;t.push(e.selectedPlugin),t.sort(((e,t)=>e.name.localeCompare(t.name))),this.enabledPlugins=t,this.saveLibraryConfig()}})).onDismiss((()=>{}))},removePluginFromList:function(e){let t=[];for(let l=0;l<this.enabledPlugins.length;l++){let i=this.enabledPlugins[l];l!==e&&(t[t.length]=i)}this.enabledPlugins=t,this.saveLibraryConfig()},closePluginInfo:function(){this.showPluginSettings=""},exportPluginConfig:function(){let e={id:this.currentID};A()({method:"post",url:(0,N.J4)("v2","settings/library/export"),data:e}).then((e=>{this.$q.dialog({component:St,componentProps:{dialogHeader:this.$t("components.settings.library.exportLibraryConfig"),jsonData:JSON.stringify(e.data,null,2),mode:"export"}}).onDismiss((()=>{}))})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},importData:function(e,t){let l=JSON.parse(e);l.library_id=this.currentID,t?this.showLoading=!1:(this.showLoading=!0,$t.Z.show({message:this.$t("components.settings.library.importPluginConfigMessage"),messageColor:"transparent"})),setTimeout((()=>{this.showLoading&&$t.Z.show({message:this.$t("components.settings.library.importPluginConfigMessage"),messageColor:"white"})}),1e3),A()({method:"post",url:(0,N.J4)("v2","settings/library/import"),data:l}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.showLoading=!1,$t.Z.hide(),this.componentKey+=1,this.fetchLibraryConfig(this.currentID)})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]}),this.showLoading=!1,$t.Z.hide()}))},importPluginConfig:function(){console.log("importPluginConfig"),this.$q.dialog({component:St,componentProps:{dialogHeader:this.$t("components.settings.library.importLibraryConfig"),jsonData:"",mode:"import"}}).onOk((e=>{"undefined"!==typeof e.importString&&null!==e.importString&&this.importData(e.importString)})).onDismiss((()=>{}))},cloneLibrary:function(){let e={id:this.currentID};A()({method:"post",url:(0,N.J4)("v2","settings/library/export"),data:e}).then((e=>{let t=e.data,l=(Math.random()+1).toString(36).substring(7),i=this.name+" ("+this.$t("navigation.copy")+" - "+l+")";t.library_config={name:i,path:this.path,enable_remote_only:this.enableReceiveRemoteFilesOnly,enable_scanner:this.enableScanner,enable_inotify:this.enableInotify,priority_score:this.priorityScore,tags:this.tags};let n=JSON.stringify(t,null,2);this.currentID=0,this.importData(n,!0),this.currentID=this.libraryId,this.hide()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},watch:{libraryId(e){e.length>0&&(this.currentID=this.libraryId)}},data:function(){return{maximizedToggle:!0,showPluginSettings:(0,U.iH)(""),currentID:(0,U.iH)(null),locked:(0,U.iH)(!1),name:(0,U.iH)(""),path:(0,U.iH)(""),enableReceiveRemoteFilesOnly:(0,U.iH)(!1),enableScanner:(0,U.iH)(!1),enableInotify:(0,U.iH)(!1),priorityScore:(0,U.iH)(0),newTag:(0,U.iH)(""),tags:(0,U.iH)([]),enabledPlugins:(0,U.iH)([]),componentKey:1,showLoading:(0,U.iH)(!1)}}};var Wt=l(3175),Pt=l(7887),Ct=l(4526),Tt=l(136);const Lt=(0,je.Z)(xt,[["render",_e]]),Qt=Lt;Ye()(xt,"components",{QDialog:Ze.Z,QCard:De.Z,QCardSection:Fe.Z,QBtn:ze.Z,QTooltip:Ie.Z,QSkeleton:dt.ZP,QInput:Oe.Z,QIcon:He.Z,QItem:Ue.Z,QItemSection:Be.Z,QItemLabel:Je.Z,QToggle:Wt.Z,QSelect:Pt.Z,QSeparator:Ve.Z,QList:Re.Z,QImg:Me.Z,QBar:Ct.Z,QSpace:Tt.Z}),Ye()(xt,"directives",{TouchSwipe:Ke.Z,ClosePopup:Ae.Z});var jt=l(3754);const Zt={name:"SettingsLibrary",components:{MobileSettingsQuickNav:jt.Z},setup(){(0,B.Z)();const{t:e}=(0,M.QT)();let t=null,l=(0,V.A)(e);function n(){t=l.init()}function a(){l.close()}(0,i.bv)((()=>{n()})),(0,i.Ah)((()=>{a()}))},data(){return{libraryPath:(0,U.iH)(null),libraryPaths:(0,U.iH)(null),newLibraryPath:(0,U.iH)(!1),enableLibraryScanner:(0,U.iH)(null),libraryScanSchedule:(0,U.iH)(null),libraryScanFollowSymlinks:(0,U.iH)(null),concurrentFileTesters:(0,U.iH)(null),runLibraryScanOnStart:(0,U.iH)(null),enableLibraryFileMonitor:(0,U.iH)(null),clearPendingTasksOnStart:(0,U.iH)(null),autoManageCompletedTasks:(0,U.iH)(null),maxAgeOfCompletedTasks:(0,U.iH)(null),alwaysKeepFailedTasks:(0,U.iH)(null)}},methods:{addNewLibraryWithDirectoryBrowser:function(){this.$q.dialog({component:J.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:this.libraryPath,listType:"directories"}}).onOk((e=>{if("undefined"!==typeof e.selectedPath&&null!==e.selectedPath){let t=(Math.random()+1).toString(36).substring(7),l="| "+(this.libraryPaths.length+1)+" | "+this.$t("components.settings.library.newLibrary")+" ("+t+")",i={library_config:{name:l,path:e.selectedPath}};A()({method:"post",url:(0,N.J4)("v2","settings/library/write"),data:i}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.fetchLibraryList()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}})).onDismiss((()=>{}))},deleteLibrary:function(e){let t;for(let l=0;l<this.libraryPaths.length;l++)if(l===e){t=this.libraryPaths[l].id;break}1!==t?this.$q.dialog({title:this.$t("headers.confirm"),message:this.$t("components.settings.library.confirmRemove"),cancel:this.$t("navigation.cancel"),ok:this.$t("navigation.yes"),persistent:!0}).onOk((()=>{let e={id:t};A()({method:"delete",url:(0,N.J4)("v2","settings/library/remove"),data:e}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.fetchLibraryList()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))})):this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.cannotRemoveDefaultLibrary"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})},fetchSettings:function(){A()({method:"get",url:(0,N.J4)("v2","settings/read")}).then((e=>{this.libraryPath=e.data.settings.library_path,this.enableLibraryScanner=e.data.settings.enable_library_scanner,this.libraryScanSchedule=e.data.settings.schedule_full_scan_minutes,this.libraryScanFollowSymlinks=e.data.settings.follow_symlinks,this.concurrentFileTesters=e.data.settings.concurrent_file_testers,this.runLibraryScanOnStart=e.data.settings.run_full_scan_on_start,this.enableLibraryFileMonitor=e.data.settings.enable_inotify,this.clearPendingTasksOnStart=e.data.settings.clear_pending_tasks_on_restart,this.autoManageCompletedTasks=e.data.settings.auto_manage_completed_tasks,this.maxAgeOfCompletedTasks=e.data.settings.max_age_of_completed_tasks,this.alwaysKeepFailedTasks=e.data.settings.always_keep_failed_tasks})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},save:function(){let e={settings:{library_path:this.libraryPath,enable_library_scanner:this.enableLibraryScanner,schedule_full_scan_minutes:this.libraryScanSchedule,follow_symlinks:this.libraryScanFollowSymlinks,concurrent_file_testers:this.concurrentFileTesters,run_full_scan_on_start:this.runLibraryScanOnStart,enable_inotify:this.enableLibraryFileMonitor,clear_pending_tasks_on_restart:this.clearPendingTasksOnStart,auto_manage_completed_tasks:this.autoManageCompletedTasks,max_age_of_completed_tasks:this.maxAgeOfCompletedTasks,always_keep_failed_tasks:this.alwaysKeepFailedTasks}};A()({method:"post",url:(0,N.J4)("v2","settings/write"),data:e}).then((e=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},fetchLibraryList:function(){A()({method:"get",url:(0,N.J4)("v2","settings/libraries")}).then((e=>{let t=[];for(let l=0;l<e.data.libraries.length;l++){let i=e.data.libraries[l];t[t.length]={id:i.id,name:i.name,path:i.path,enableRemoteOnly:i.enable_remote_only,enableScanner:i.enable_scanner,enableInotify:i.enable_inotify,tags:i.tags,locked:i.locked}}this.libraryPaths=t})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchLibraryList"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},configureLibraryPath:function(e){let t=this.libraryPaths[e];this.$q.dialog({component:Qt,componentProps:{dialogHeader:this.$t("headers.configureLibrary"),libraryId:t.id}}).onOk((e=>{})).onDismiss((()=>{this.fetchSettings(),this.fetchLibraryList()}))}},created(){this.fetchSettings(),this.fetchLibraryList()}};var Dt=l(9885),Ft=l(8326),zt=l(8423);const It=(0,je.Z)(Zt,[["render",R]]),Ot=It;Ye()(Zt,"components",{QPage:Dt.Z,QForm:Ft.Z,QSkeleton:dt.ZP,QList:Re.Z,QItem:Ue.Z,QItemSection:Be.Z,QAvatar:ct.Z,QTooltip:Ie.Z,QItemLabel:Je.Z,QIcon:He.Z,QSeparator:Ve.Z,QBtn:ze.Z,QBar:Ct.Z,QSpace:Tt.Z,QToggle:Wt.Z,QInput:Oe.Z,QSlider:zt.Z})}}]);