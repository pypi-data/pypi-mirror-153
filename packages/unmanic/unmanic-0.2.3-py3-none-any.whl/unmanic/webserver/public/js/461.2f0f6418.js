"use strict";(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[461],{9191:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ae});var n=l(9835);const i={class:"q-pa-none"},a={class:"row"},o={class:"col q-ma-sm"};function s(e,t,l,s,u,r){const c=(0,n.up)("PluginsInstalledTable"),d=(0,n.up)("MobileSettingsQuickNav"),g=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(g,{padding:""},{default:(0,n.w5)((()=>[(0,n._)("div",i,[(0,n._)("div",a,[(0,n._)("div",o,[(0,n.Wm)(c)])]),(0,n.Wm)(d,{prevEnabled:!0,prevLabel:e.$t("navigation.workers"),prevPath:"/ui/settings-workers",nextEnabled:!0,nextLabel:e.$t("navigation.link"),nextPath:"/ui/settings-link"},null,8,["prevLabel","nextLabel"])])])),_:1})}var u=l(6970);const r={class:"row q-gutter-xs q-mt-xs justify-between"},c={class:"col-auto"},d={class:"col-auto",style:{"max-width":"200px"}},g={class:"q-gutter-sm"},p=["innerHTML"],m={class:"row"},w=(0,n._)("div",{class:"col-6 text-right"},[(0,n._)("span",{class:"text-weight-medium"},"Author")],-1),f={class:"col-6 q-px-sm"},v={class:"row"},_=(0,n._)("div",{class:"col-6 text-right"},[(0,n._)("span",{class:"text-weight-medium"},"Version")],-1),h={class:"col-6 q-px-sm"},b={class:"text-grey-8 q-gutter-xs q-mr-lg"},k={key:0},P={key:1},W={class:"text-grey-8 q-gutter-xs"};function x(e,t,l,i,a,o){const s=(0,n.up)("q-btn"),x=(0,n.up)("q-icon"),q=(0,n.up)("q-input"),y=(0,n.up)("q-card-section"),C=(0,n.up)("q-img"),I=(0,n.up)("q-item-section"),Z=(0,n.up)("q-item-label"),$=(0,n.up)("q-tooltip"),z=(0,n.up)("q-separator"),Q=(0,n.up)("q-item"),S=(0,n.up)("q-list"),H=(0,n.up)("q-btn-dropdown"),U=(0,n.up)("q-card"),j=(0,n.up)("PluginInfo"),A=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(U,{flat:""},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{class:(0,u.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n._)("div",c,[(0,n.Wm)(s,{onClick:i.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPlugins")},null,8,["onClick","label"])]),(0,n._)("div",d,[(0,n.Wm)(q,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:i.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filter=e),placeholder:e.$t("navigation.search")},{append:(0,n.w5)((()=>[(0,n.Wm)(x,{name:"search"})])),_:1},8,["modelValue","placeholder"])])])])),_:1},8,["class"]),(0,n.Wm)(y,{class:(0,u.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,n.w5)((()=>[(0,n._)("div",g,[(0,n.Wm)(S,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.listedPlugins,((t,l)=>((0,n.wg)(),(0,n.j4)(Q,{key:l,class:(0,u.C_)(t.status.update_available?"bg-warning":"")},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{src:t.icon},null,8,["src"])])),_:2},1024),(0,n.Wm)(I,{top:"",class:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(t.name),1)])),_:2},1024),(0,n.Wm)(Z,{caption:"",lines:"3"},{default:(0,n.w5)((()=>[(0,n._)("span",{innerHTML:t.description},null,8,p)])),_:2},1024)])),_:2},1024),(0,n.Wm)(I,{top:"",class:"gt-xs col-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{lines:"1"},{default:(0,n.w5)((()=>[(0,n._)("div",m,[w,(0,n._)("div",f,[(0,n._)("span",{class:(0,u.C_)(e.$q.dark.isActive&&!t.status.update_available?"text-grey-5":"text-grey-8")},(0,u.zw)(t.author),3)])])])),_:2},1024),(0,n.Wm)(Z,{lines:"1"},{default:(0,n.w5)((()=>[(0,n._)("div",v,[_,(0,n._)("div",h,[(0,n._)("span",{class:(0,u.C_)(e.$q.dark.isActive&&!t.status.update_available?"text-grey-5":"text-grey-8")},(0,u.zw)(t.version),3)])])])),_:2},1024)])),_:2},1024),(0,n.Wm)(I,{center:"",side:""},{default:(0,n.w5)((()=>[(0,n._)("div",b,[t.status.update_available?((0,n.wg)(),(0,n.j4)(s,{key:0,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"info",icon:"update",onClick:e=>i.updateSinglePlugin(t.id)},null,8,["onClick"])):((0,n.wg)(),(0,n.j4)(s,{key:1,disable:"",flat:"",dense:"",round:"",class:"gt-xs no-pointer-events",size:"12px",color:"positive",icon:"download_done"}))]),(0,n.Wm)($,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[t.status.update_available?((0,n.wg)(),(0,n.iD)("span",k,(0,u.zw)(e.$t("components.plugins.clickToUpdatePlugin")),1)):((0,n.wg)(),(0,n.iD)("span",P,(0,u.zw)(e.$t("components.plugins.pluginUpToDate")),1))])),_:2},1024)])),_:2},1024),(0,n.Wm)(z,{inset:"",vertical:"",class:"q-mx-sm"}),(0,n.Wm)(I,{center:"",side:""},{default:(0,n.w5)((()=>[(0,n._)("div",W,[(0,n.Wm)(H,{flat:"",dense:"",rounded:"",class:"lt-sm",size:"12px","no-icon-animation":"","dropdown-icon":"more_vert"},{default:(0,n.w5)((()=>[(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(Q,{clickable:"",onClick:e=>i.openPluginInfo(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{color:"info",name:"info"})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)(Z,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[A]]),t.has_config?(0,n.wy)(((0,n.wg)(),(0,n.j4)(Q,{key:0,clickable:"",onClick:e=>i.openPluginInfo(t.id,"settings")},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{color:"grey-8",name:"tune"})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)(Z,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[A]]):(0,n.kq)("",!0),t.status.update_available?(0,n.wy)(((0,n.wg)(),(0,n.j4)(Q,{key:1,clickable:"",onClick:e=>i.updateSinglePlugin(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{color:"warning",name:"update"})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)(Z,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.$t("components.plugins.updatePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[A]]):(0,n.kq)("",!0),(0,n.wy)(((0,n.wg)(),(0,n.j4)(Q,{clickable:"",onClick:e=>i.removeSinglePlugin(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{color:"negative",name:"delete"})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)(Z,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[A]])])),_:2},1024)])),_:2},1024),(0,n.Wm)(s,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"secondary",icon:"info",onClick:e=>i.openPluginInfo(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)($,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(s,{disable:!t.has_config,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"grey-8",icon:"tune",onClick:e=>i.openPluginInfo(t.id,"settings")},{default:(0,n.w5)((()=>[(0,n.Wm)($,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,n.Wm)(s,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"negative",icon:"delete",onClick:e=>i.removeSinglePlugin(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)($,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024),t.status.update_available?((0,n.wg)(),(0,n.j4)($,{key:0,class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.$t("components.plugins.updateAvailable")),1)])),_:1})):(0,n.kq)("",!0)])),_:2},1032,["class"])))),128))])),_:1})])])),_:1},8,["class"])])),_:1}),(0,n.Wm)(j,{showPluginInfo:i.showPluginInfo,showPluginSettings:i.showPluginSettings,onHide:i.closePluginInfo},null,8,["showPluginInfo","showPluginSettings","onHide"])],64)}l(702);var q=l(499),y=l(6888),C=l(9302),I=l(9981),Z=l.n(I),$=l(6225),z=l(1577),Q=l(282);const S={components:{PluginInfo:$.Z},setup(){const e=(0,C.Z)(),t=(0,q.iH)([]),l=(0,q.iH)(""),i=(0,q.iH)(!1),a=(0,q.iH)({sortBy:"name",descending:!1,page:1,rowsPerPage:50,rowsNumber:10}),o=(0,q.iH)([]),s=(0,q.iH)([]),u=(0,q.iH)(0);function r(){let e="";return 0!==o.value.length&&(e=`${o.value.length} record${o.value.length>1?"s":""} selected of ${t.value.length}`),e}function c(){if(0!==o.value.length){let t=[];for(let e=0;e<o.value.length;e++){let l=o.value[e];t[t.length]=l.id}let n={id_list:t};Z()({method:"post",url:(0,y.J4)("v2","plugins/disable"),data:n}).then((e=>{f({pagination:a.value,filter:l.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be disabled",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function d(t){let n={id_list:t};Z()({method:"post",url:(0,y.J4)("v2","plugins/update"),data:n}).then((e=>{f({pagination:a.value,filter:l.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be updated",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function g(e){d([e])}function p(t){let n={id_list:t};Z()({method:"delete",url:(0,y.J4)("v2","plugins/remove"),data:n}).then((e=>{f({pagination:a.value,filter:l.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be removed",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function m(e){p([e])}function w(e){return e.length>280&&(e=e.substring(0,277)+"..."),e=e.split("\n")[0],(0,z.nx)(e)}function f(l){const{page:n,rowsPerPage:o,sortBy:u,descending:r}=l.pagination,c=l.filter;i.value=!0;const d=0===o?a.value.rowsNumber:o,g=(n-1)*o;let p={start:g,length:d,search_value:c,order_by:u,order_direction:r?"desc":"asc"};Z()({method:"post",url:(0,y.J4)("v2","plugins/installed"),data:p}).then((e=>{a.value.rowsNumber=e.data.recordsFiltered,s.value=[];for(let t=0;t<e.data.results.length;t++){let l=e.data.results[t];s.value[t]={id:l.id,plugin_id:l.plugin_id,icon:l.icon,name:l.name,description:w(l.description),tags:l.tags,author:l.author,version:l.version,status:l.status,has_config:l.has_config}}t.value.splice(0,t.value.length,...s.value),a.value.page=n,a.value.rowsPerPage=o,a.value.sortBy=u,a.value.descending=r,i.value=!1})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the installed plugins list",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}const v=(0,q.iH)(""),_=(0,q.iH)("");function h(e,t){v.value="",_.value="";for(let l=0;l<s.value.length;l++){let n=s.value[l];n.id===e&&("settings"===t?_.value=n.plugin_id:v.value=n.plugin_id)}}function b(){v.value="",_.value=""}function k(){e.dialog({component:Q.Z,componentProps:{}}).onOk((e=>{})).onDismiss((()=>{f({pagination:a.value,filter:l.value})}))}return(0,n.bv)((()=>{f({pagination:a.value,filter:void 0})})),(0,n.YP)(l,((e,t)=>{f({pagination:a.value,filter:l.value})})),{selected:o,filter:l,loading:i,pagination:a,rows:t,listedPlugins:s,itemOffset:u,getSelectedString:r,onRequest:f,disableSelected:c,updateSinglePlugin:g,removeSinglePlugin:m,openPluginInfo:h,showPluginInfo:v,showPluginSettings:_,closePluginInfo:b,openPluginInstaller:k}}};var H=l(1639),U=l(4458),j=l(3190),A=l(8879),L=l(6611),T=l(2857),D=l(3246),N=l(490),B=l(1233),J=l(335),M=l(3115),V=l(6858),Y=l(926),E=l(2045),O=l(2146),F=l(9984),K=l.n(F);const R=(0,H.Z)(S,[["render",x]]),G=R;K()(S,"components",{QCard:U.Z,QCardSection:j.Z,QBtn:A.Z,QInput:L.Z,QIcon:T.Z,QList:D.Z,QItem:N.Z,QItemSection:B.Z,QImg:J.Z,QItemLabel:M.Z,QTooltip:V.Z,QSeparator:Y.Z,QBtnDropdown:E.Z}),K()(S,"directives",{ClosePopup:O.Z});var X=l(586),ee=l(9991),te=l(3754);const le={components:{MobileSettingsQuickNav:te.Z,PluginsInstalledTable:G},setup(){const{t:e}=(0,ee.QT)();let t=null,l=(0,X.A)(e);function i(){t=l.init()}function a(){l.close()}(0,n.bv)((()=>{i()})),(0,n.Ah)((()=>{a()}))}};var ne=l(9885);const ie=(0,H.Z)(le,[["render",s]]),ae=ie;K()(le,"components",{QPage:ne.Z})}}]);