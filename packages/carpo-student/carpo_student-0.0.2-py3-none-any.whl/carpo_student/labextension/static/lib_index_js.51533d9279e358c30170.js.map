{"version":3,"file":"lib_index_js.51533d9279e358c30170.js","mappings":";;;;;;;;;;;;;;;;;AAA+C;AACS;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACO,kDAAkD;AACzD;AACA,qBAAqB,+EAA6B;AAClD,uBAAuB,8DAAW;AAClC;AACA;AACA;AACA,yBAAyB,8EAA4B;AACrD;AACA;AACA,kBAAkB,+EAA6B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gFAA8B;AAChD;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCyD;AACd;AACoB;AACxB;AACiB;AACmC;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kEAAgB;AAC/B,eAAe,yEAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,+CAA+C,oDAAe;AAC9D;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAU;AACtB;AACA,aAAa;AACb;AACA;AACA,gBAAgB,gEAAU;AAC1B;AACA;AACA,8BAA8B,iEAAe,GAAG,aAAa;AAC7D,iBAAiB;AACjB,aAAa;AACb;AACA,gBAAgB,sEAAgB;AAChC,sEAAsE,OAAO;AAC7E,aAAa;AACb;AACA,2BAA2B,+DAAa;AACxC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mBAAmB,kEAAkB;AACrC;AACA,SAAS;AACT;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAU;AACtB;AACA,aAAa;AACb;AACA;AACA,gBAAgB,gEAAU;AAC1B;AACA;AACA,8BAA8B,iEAAe,GAAG,aAAa;AAC7D,iBAAiB;AACjB,aAAa;AACb;AACA,gBAAgB,sEAAgB;AAChC,kEAAkE,OAAO;AACzE,aAAa;AACb;AACA,2BAA2B,+DAAa;AACxC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mBAAmB,kEAAkB;AACrC;AACA,SAAS;AACT;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAU;AACtB;AACA;AACA,aAAa;AACb;AACA;AACA,gBAAgB,gEAAU;AAC1B;AACA;AACA,8BAA8B,iEAAe,GAAG,aAAa;AAC7D,iBAAiB;AACjB,aAAa;AACb;AACA,gBAAgB,sEAAgB;AAChC,kEAAkE,OAAO;AACzE,aAAa;AACb;AACA,2BAA2B,+DAAa;AACxC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mBAAmB,kEAAkB;AACrC;AACA,SAAS;AACT;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAU;AACtB;AACA,aAAa;AACb;AACA;AACA,gBAAgB,gEAAU;AAC1B;AACA;AACA,8BAA8B,iEAAe,GAAG,aAAa;AAC7D,iBAAiB;AACjB,aAAa;AACb;AACA,gBAAgB,sEAAgB;AAChC,oEAAoE,OAAO;AAC3E,aAAa;AACb;AACA,2BAA2B,+DAAa;AACxC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mBAAmB,kEAAkB;AACrC;AACA,SAAS;AACT;AACA;AACA,iEAAe,MAAM,EAAC;;;;;;;;;;;;;;;;;;;;;;ACtP6B;AACiB;AAC1C;AACa;AACqC;AAC5E,uBAAuB,eAAe,MAAM,0DAAmB,aAAa,mEAAmE;AAC/I,IAAI,0DAAmB,CAAC,2EAAoB,IAAI,sFAAsF;AACtI,mCAAmC,aAAa;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,oDAAU;AAClB;AACA;AACA,SAAS;AACT;AACA;AACA,YAAY,gEAAU;AACtB;AACA;AACA,0BAA0B,iEAAe,GAAG,aAAa;AACzD,aAAa;AACb,SAAS;AACT;AACA,YAAY,sEAAgB;AAC5B,8DAA8D,OAAO;AACrE,SAAS;AACT;AACA,YAAY,0DAAmB;AAC/B,QAAQ,0DAAmB,gBAAgB,MAAM,qEAAc,gCAAgC;AAC/F;AACO,8BAA8B,6DAAW;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAAmB,4BAA4B,kCAAkC;AACxG;AACA;AACA;AACA;AACA","sources":["webpack://carpo-student/./lib/handler.js","webpack://carpo-student/./lib/index.js","webpack://carpo-student/./lib/widget.js"],"sourcesContent":["import { URLExt } from '@jupyterlab/coreutils';\nimport { ServerConnection } from '@jupyterlab/services';\n/**\n * Call the API extension\n *\n * @param endPoint API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestAPI(endPoint = '', init = {}) {\n    // Make request to Jupyter API\n    const settings = ServerConnection.makeSettings();\n    const requestUrl = URLExt.join(settings.baseUrl, 'carpo-student', // API Namespace\n    endPoint);\n    let response;\n    try {\n        response = await ServerConnection.makeRequest(requestUrl, init, settings);\n    }\n    catch (error) {\n        throw new ServerConnection.NetworkError(error);\n    }\n    let data = await response.text();\n    if (data.length > 0) {\n        try {\n            data = JSON.parse(data);\n        }\n        catch (error) {\n            console.log('Not a JSON response body.', response);\n        }\n    }\n    if (!response.ok) {\n        throw new ServerConnection.ResponseError(response, data.message || data);\n    }\n    return data;\n}\n","import { INotebookTracker, } from '@jupyterlab/notebook';\nimport { CellCheckButton } from './widget';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { requestAPI } from './handler';\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { ToolbarButton, Dialog, showDialog, showErrorMessage } from '@jupyterlab/apputils';\n/**\n * Initialization data for the carpo-student extension.\n */\nconst plugin = {\n    id: 'carpo-student:plugin',\n    autoStart: true,\n    requires: [INotebookTracker],\n    optional: [ISettingRegistry],\n    activate: (app, nbTrack, settingRegistry) => {\n        console.log('JupyterLab extension carpo-student is activated!');\n        nbTrack.currentChanged.connect(() => {\n            const notebookPanel = nbTrack.currentWidget;\n            const notebook = nbTrack.currentWidget.content;\n            const filename = notebookPanel.context.path;\n            // Disable Code Share functionality if not the \"problem_\"\" Notebook.\n            if (!filename.includes(\"problem_\")) {\n                return;\n            }\n            notebookPanel.context.ready.then(async () => {\n                let currentCell = null;\n                let currentCellCheckButton = null;\n                nbTrack.activeCellChanged.connect(() => {\n                    if (currentCell) {\n                        notebook.widgets.map((c) => {\n                            if (c.model.type == 'code') {\n                                const currentLayout = c.layout;\n                                currentLayout.widgets.map(w => {\n                                    if (w === currentCellCheckButton) {\n                                        currentLayout.removeWidget(w);\n                                    }\n                                });\n                            }\n                        });\n                    }\n                    const cell = notebook.activeCell;\n                    const activeIndex = notebook.activeCellIndex;\n                    var info = {\n                        problem_id: parseInt((filename.split(\"_\").pop()).replace(\".ipynb\", \"\"))\n                    };\n                    // Get the message block referencing the active cell.\n                    notebook.widgets.map((c, index) => {\n                        if (index == activeIndex - 1) {\n                            info.message = c.model.value.text;\n                        }\n                    });\n                    const newCheckButton = new CellCheckButton(cell, info);\n                    cell.layout.addWidget(newCheckButton);\n                    // Set the current cell and button for future\n                    // reference\n                    currentCell = cell;\n                    currentCellCheckButton = newCheckButton;\n                });\n            });\n        });\n        //  tell the document registry about your widget extension:\n        app.docRegistry.addWidgetExtension('Notebook', new RegisterButton());\n        app.docRegistry.addWidgetExtension('Notebook', new GetQuestionButton());\n        // app.docRegistry.addWidgetExtension('Notebook', new CodeSubmissionButton());\n        app.docRegistry.addWidgetExtension('Notebook', new GetFeedbackButton());\n    }\n};\nexport class RegisterButton {\n    /**\n     * Create a new extension for the notebook panel widget.\n     *\n     * @param panel Notebook panel\n     * @param context Notebook context\n     * @returns Disposable on the added button\n     */\n    createNew(panel, context) {\n        const register = () => {\n            // NotebookActions.clearAllOutputs(panel.content);\n            // const notebook = panel.content;\n            requestAPI('register', {\n                method: 'GET'\n            })\n                .then(data => {\n                console.log(data);\n                showDialog({\n                    title: 'Register',\n                    body: \"User \" + data.name + \" created as Student.\",\n                    buttons: [Dialog.okButton({ label: 'Ok' })]\n                });\n            })\n                .catch(reason => {\n                showErrorMessage('Registration Error', reason);\n                console.error(`Failed to register user as Student.\\n${reason}`);\n            });\n        };\n        const button = new ToolbarButton({\n            className: 'register-button',\n            label: 'Setup Carpo',\n            onClick: register,\n            tooltip: 'Register as a Student',\n        });\n        panel.toolbar.insertItem(10, 'register', button);\n        return new DisposableDelegate(() => {\n            button.dispose();\n        });\n    }\n}\nexport class GetQuestionButton {\n    /**\n     * Create a new extension for the notebook panel widget.\n     *\n     * @param panel Notebook panel\n     * @param context Notebook context\n     * @returns Disposable on the added button\n     */\n    createNew(panel, context) {\n        const getQuestion = () => {\n            // NotebookActions.clearAllOutputs(panel.content);\n            // const notebook = panel.content;\n            requestAPI('question', {\n                method: 'GET'\n            })\n                .then(data => {\n                console.log(data);\n                showDialog({\n                    title: 'Questions',\n                    body: data.msg,\n                    buttons: [Dialog.okButton({ label: 'Ok' })]\n                });\n            })\n                .catch(reason => {\n                showErrorMessage('Get Question Error', reason);\n                console.error(`Failed to get active questions.\\n${reason}`);\n            });\n        };\n        const button = new ToolbarButton({\n            className: 'get-question-button',\n            label: 'Get Question',\n            onClick: getQuestion,\n            tooltip: 'Get Latest Question from Server',\n        });\n        panel.toolbar.insertItem(11, 'getQuestion', button);\n        return new DisposableDelegate(() => {\n            button.dispose();\n        });\n    }\n}\n// Outdated.\nexport class CodeSubmissionButton {\n    /**\n     * Create a new extension for the notebook panel widget.\n     *\n     * @param panel Notebook panel\n     * @param context Notebook context\n     * @returns Disposable on the added button\n     */\n    createNew(panel, context) {\n        const sendCode = () => {\n            // NotebookActions.clearAllOutputs(panel.content);\n            const notebook = panel.content;\n            const activeIndex = notebook.activeCellIndex;\n            var message, code;\n            notebook.widgets.map((c, index) => {\n                // This is Markdown cell\n                if (index === activeIndex - 1) {\n                    message = c.model.value.text;\n                }\n                // This is Code cell & Active cell\n                if (index === activeIndex) {\n                    code = c.model.value.text;\n                }\n            });\n            const filename = panel.context.path;\n            let postBody = {\n                \"message\": message,\n                \"code\": code,\n                \"problem_id\": (filename.split(\"-\").pop()).replace(\".ipynb\", \"\")\n            };\n            console.log(\"body: \", postBody);\n            requestAPI('submissions', {\n                method: 'POST',\n                body: JSON.stringify(postBody)\n            })\n                .then(data => {\n                console.log(data);\n                showDialog({\n                    title: 'Code Submission',\n                    body: data.msg,\n                    buttons: [Dialog.okButton({ label: 'Ok' })]\n                });\n            })\n                .catch(reason => {\n                showErrorMessage('Code Submission Error', reason);\n                console.error(`Failed to share code to server.\\n${reason}`);\n            });\n        };\n        const button = new ToolbarButton({\n            className: 'send-code-button',\n            label: 'Send All Code',\n            onClick: sendCode,\n            tooltip: 'Send code to Go Server',\n        });\n        panel.toolbar.insertItem(11, 'sendCodes', button);\n        return new DisposableDelegate(() => {\n            button.dispose();\n        });\n    }\n}\nexport class GetFeedbackButton {\n    /**\n     * Create a new extension for the notebook panel widget.\n     *\n     * @param panel Notebook panel\n     * @param context Notebook context\n     * @returns Disposable on the added button\n     */\n    createNew(panel, context) {\n        const getFeedback = () => {\n            requestAPI('feedback', {\n                method: 'GET'\n            })\n                .then(data => {\n                console.log(data);\n                showDialog({\n                    title: 'Teacher Feedback',\n                    body: data.msg,\n                    buttons: [Dialog.okButton({ label: 'Ok' })]\n                });\n            })\n                .catch(reason => {\n                showErrorMessage('Get Feedback Error', reason);\n                console.error(`Failed to fetch recent feedbacks.\\n${reason}`);\n            });\n        };\n        const button = new ToolbarButton({\n            className: 'get-feedback-button',\n            label: 'Get Feedback',\n            onClick: getFeedback,\n            tooltip: 'Get Feedback to your Submission',\n        });\n        panel.toolbar.insertItem(12, 'getFeedback', button);\n        return new DisposableDelegate(() => {\n            button.dispose();\n        });\n    }\n}\nexport default plugin;\n","import { ReactWidget } from '@jupyterlab/apputils';\nimport { fileUploadIcon, LabIcon } from '@jupyterlab/ui-components';\nimport React from 'react';\nimport { requestAPI } from './handler';\nimport { Dialog, showDialog, showErrorMessage } from '@jupyterlab/apputils';\nconst ShareButton = ({ icon, onClick }) => (React.createElement(\"button\", { type: \"button\", onClick: () => onClick(), className: \"cellButton\" },\n    React.createElement(LabIcon.resolveReact, { icon: icon, className: \"cellButton-icon\", tag: \"span\", width: \"15px\", height: \"15px\" })));\nconst CodeCellButtonComponent = ({ cell, info, }) => {\n    const shareCode = async () => {\n        let postBody = {\n            \"message\": info.message,\n            \"code\": cell.model.value.text,\n            \"problem_id\": info.problem_id\n        };\n        console.log(\"From widget: \", postBody);\n        requestAPI('submissions', {\n            method: 'POST',\n            body: JSON.stringify(postBody)\n        })\n            .then(data => {\n            console.log(data);\n            showDialog({\n                title: 'Code Share',\n                body: 'Code in this block has been shared with the instructor.',\n                buttons: [Dialog.okButton({ label: 'Ok' })]\n            });\n        })\n            .catch(reason => {\n            showErrorMessage('Code Share Error', reason);\n            console.error(`Failed to share code to server.\\n${reason}`);\n        });\n    };\n    return (React.createElement(\"div\", null,\n        React.createElement(ShareButton, { icon: fileUploadIcon, onClick: () => (shareCode)() })));\n};\nexport class CellCheckButton extends ReactWidget {\n    constructor(cell, info) {\n        super();\n        this.cell = null;\n        this.info = null;\n        this.cell = cell;\n        this.info = info;\n        this.addClass('jp-CellButton');\n    }\n    render() {\n        switch (this.cell.model.type) {\n            case 'code':\n                return React.createElement(CodeCellButtonComponent, { cell: this.cell, info: this.info });\n            default:\n                break;\n        }\n    }\n}\n"],"names":[],"sourceRoot":""}