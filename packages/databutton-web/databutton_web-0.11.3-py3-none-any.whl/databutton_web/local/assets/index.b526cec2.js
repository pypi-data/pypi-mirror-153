import{r as h,s as S,j as w,F as le,a as u,T as z,S as q,B as Oe,R as ne,b as xe,c as ut,d as st}from"./index.9ef9b169.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ze(e,i,t,n){function a(r){return r instanceof t?r:new t(function(l){l(r)})}return new(t||(t=Promise))(function(r,l){function d(c){try{o(n.next(c))}catch(v){l(v)}}function p(c){try{o(n.throw(c))}catch(v){l(v)}}function o(c){c.done?r(c.value):a(c.value).then(d,p)}o((n=n.apply(e,i||[])).next())})}function Be(e,i){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,a,r,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(o){return function(c){return p([o,c])}}function p(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(r=o[0]&2?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[o[0]&2,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){t.label=o[1];break}if(o[0]===6&&t.label<r[1]){t.label=r[1],r=o;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(o);break}r[2]&&t.ops.pop(),t.trys.pop();continue}o=i.call(e,t)}catch(c){o=[6,c],a=0}finally{n=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var $=function(){},g=$(),ee=Object,x=function(e){return e===g},M=function(e){return typeof e=="function"},W=function(e,i){return ee.assign({},e,i)},De="undefined",Ae=function(){return typeof window!=De},lt=function(){return typeof document!=De},ct=function(){return Ae()&&typeof window.requestAnimationFrame!=De},se=new WeakMap,dt=0,ae=function(e){var i=typeof e,t=e&&e.constructor,n=t==Date,a,r;if(ee(e)===e&&!n&&t!=RegExp){if(a=se.get(e),a)return a;if(a=++dt+"~",se.set(e,a),t==Array){for(a="@",r=0;r<e.length;r++)a+=ae(e[r])+",";se.set(e,a)}if(t==ee){a="#";for(var l=ee.keys(e).sort();!x(r=l.pop());)x(e[r])||(a+=r+":"+ae(e[r])+",");se.set(e,a)}}else a=n?e.toJSON():i=="symbol"?e.toString():i=="string"?JSON.stringify(e):""+e;return a},Ce=!0,ft=function(){return Ce},He=Ae(),Ie=lt(),Re=He&&window.addEventListener?window.addEventListener.bind(window):$,ht=Ie?document.addEventListener.bind(document):$,Ee=He&&window.removeEventListener?window.removeEventListener.bind(window):$,vt=Ie?document.removeEventListener.bind(document):$,pt=function(){var e=Ie&&document.visibilityState;return x(e)||e!=="hidden"},mt=function(e){return ht("visibilitychange",e),Re("focus",e),function(){vt("visibilitychange",e),Ee("focus",e)}},bt=function(e){var i=function(){Ce=!0,e()},t=function(){Ce=!1};return Re("online",i),Re("offline",t),function(){Ee("online",i),Ee("offline",t)}},gt={isOnline:ft,isVisible:pt},wt={initFocus:mt,initReconnect:bt},fe=!Ae()||"Deno"in window,yt=function(e){return ct()?window.requestAnimationFrame(e):setTimeout(e,1)},te=fe?h.exports.useEffect:h.exports.useLayoutEffect,we=typeof navigator!="undefined"&&navigator.connection,Fe=!fe&&we&&(["slow-2g","2g"].includes(we.effectiveType)||we.saveData),Ge=function(e){if(M(e))try{e=e()}catch{e=""}var i=[].concat(e);e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?ae(e):"";var t=e?"$swr$"+e:"";return[e,i,t]},B=new WeakMap,qe=0,Je=1,Ke=2,re=function(e,i,t,n,a,r,l){l===void 0&&(l=!0);var d=B.get(e),p=d[0],o=d[1],c=d[3],v=p[i],f=o[i];if(l&&f)for(var k=0;k<f.length;++k)f[k](t,n,a);return r&&(delete c[i],v&&v[0])?v[0](Ke).then(function(){return e.get(i)}):e.get(i)},xt=0,Se=function(){return++xt},Xe=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return ze(void 0,void 0,void 0,function(){var t,n,a,r,l,d,p,o,c,v,f,k,ie,C,m,s,J,U,_,D,N;return Be(this,function(F){switch(F.label){case 0:if(t=e[0],n=e[1],a=e[2],r=e[3],l=typeof r=="boolean"?{revalidate:r}:r||{},d=x(l.populateCache)?!0:l.populateCache,p=l.revalidate!==!1,o=l.rollbackOnError!==!1,c=l.optimisticData,v=Ge(n),f=v[0],k=v[2],!f)return[2];if(ie=B.get(t),C=ie[2],e.length<3)return[2,re(t,f,t.get(f),g,g,p,!0)];if(m=a,J=Se(),C[f]=[J,0],U=!x(c),_=t.get(f),U&&(D=M(c)?c(_):c,t.set(f,D),re(t,f,D)),M(m))try{m=m(t.get(f))}catch(P){s=P}return m&&M(m.then)?[4,m.catch(function(P){s=P})]:[3,2];case 1:if(m=F.sent(),J!==C[f][0]){if(s)throw s;return[2,m]}else s&&U&&o&&(d=!0,m=_,t.set(f,_));F.label=2;case 2:return d&&(s||(M(d)&&(m=d(m,_)),t.set(f,m)),t.set(k,W(t.get(k),{error:s}))),C[f][1]=Se(),[4,re(t,f,m,s,g,p,!!d)];case 3:if(N=F.sent(),s)throw s;return[2,d?N:m]}})})},je=function(e,i){for(var t in e)e[t][0]&&e[t][0](i)},Ye=function(e,i){if(!B.has(e)){var t=W(wt,i),n={},a=Xe.bind(g,e),r=$;if(B.set(e,[n,{},{},{},a]),!fe){var l=t.initFocus(setTimeout.bind(g,je.bind(g,n,qe))),d=t.initReconnect(setTimeout.bind(g,je.bind(g,n,Je)));r=function(){l&&l(),d&&d(),B.delete(e)}}return[e,a,r]}return[e,B.get(e)[4]]},Ct=function(e,i,t,n,a){var r=t.errorRetryCount,l=a.retryCount,d=~~((Math.random()+.5)*(1<<(l<8?l:8)))*t.errorRetryInterval;!x(r)&&l>r||setTimeout(n,d,a)},Qe=Ye(new Map),Ze=Qe[0],Rt=Qe[1],et=W({onLoadingSlow:$,onSuccess:$,onError:$,onErrorRetry:Ct,onDiscarded:$,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Fe?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Fe?5e3:3e3,compare:function(e,i){return ae(e)==ae(i)},isPaused:function(){return!1},cache:Ze,mutate:Rt,fallback:{}},gt),tt=function(e,i){var t=W(e,i);if(i){var n=e.use,a=e.fallback,r=i.use,l=i.fallback;n&&r&&(t.use=n.concat(r)),a&&l&&(t.fallback=W(a,l))}return t},Te=h.exports.createContext({}),Et=function(e){var i=e.value,t=tt(h.exports.useContext(Te),i),n=i&&i.provider,a=h.exports.useState(function(){return n?Ye(n(t.cache||Ze),i):g})[0];return a&&(t.cache=a[0],t.mutate=a[1]),te(function(){return a?a[2]:g},[]),h.exports.createElement(Te.Provider,W(e,{value:t}))},St=function(e,i){var t=h.exports.useState({})[1],n=h.exports.useRef(e),a=h.exports.useRef({data:!1,error:!1,isValidating:!1}),r=h.exports.useCallback(function(l){var d=!1,p=n.current;for(var o in l){var c=o;p[c]!==l[c]&&(p[c]=l[c],a.current[c]&&(d=!0))}d&&!i.current&&t({})},[]);return te(function(){n.current=e}),[n,a.current,r]},Tt=function(e){return M(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}]},Ot=function(){return W(et,h.exports.useContext(Te))},Dt=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=Ot(),r=Tt(t),l=r[0],d=r[1],p=r[2],o=tt(a,p),c=e,v=o.use;if(v)for(var f=v.length;f-- >0;)c=v[f](c);return c(l,d||o.fetcher,o)}},Me=function(e,i,t){var n=i[e]||(i[e]=[]);return n.push(t),function(){var a=n.indexOf(t);a>=0&&(n[a]=n[n.length-1],n.pop())}},ye={dedupe:!0},At=function(e,i,t){var n=t.cache,a=t.compare,r=t.fallbackData,l=t.suspense,d=t.revalidateOnMount,p=t.refreshInterval,o=t.refreshWhenHidden,c=t.refreshWhenOffline,v=B.get(n),f=v[0],k=v[1],ie=v[2],C=v[3],m=Ge(e),s=m[0],J=m[1],U=m[2],_=h.exports.useRef(!1),D=h.exports.useRef(!1),N=h.exports.useRef(s),F=h.exports.useRef(i),P=h.exports.useRef(t),b=function(){return P.current},he=function(){return b().isVisible()&&b().isOnline()},oe=function(T){return n.set(U,W(n.get(U),T))},$e=n.get(s),at=x(r)?t.fallback[s]:r,V=x($e)?at:$e,ke=n.get(U)||{},K=ke.error,_e=!_.current,Ve=function(){return _e&&!x(d)?d:b().isPaused()?!1:l?x(V)?!1:t.revalidateIfStale:x(V)||t.revalidateIfStale},it=function(){return!s||!i?!1:ke.isValidating?!0:_e&&Ve()},ve=it(),pe=St({data:V,error:K,isValidating:ve},D),H=pe[0],me=pe[1],ue=pe[2],L=h.exports.useCallback(function(T){return ze(void 0,void 0,void 0,function(){var R,E,O,X,Y,A,y,j,I,be,Q,G,ge;return Be(this,function(Z){switch(Z.label){case 0:if(R=F.current,!s||!R||D.current||b().isPaused())return[2,!1];X=!0,Y=T||{},A=!C[s]||!Y.dedupe,y=function(){return!D.current&&s===N.current&&_.current},j=function(){var We=C[s];We&&We[1]===O&&delete C[s]},I={isValidating:!1},be=function(){oe({isValidating:!1}),y()&&ue(I)},oe({isValidating:!0}),ue({isValidating:!0}),Z.label=1;case 1:return Z.trys.push([1,3,,4]),A&&(re(n,s,H.current.data,H.current.error,!0),t.loadingTimeout&&!n.get(s)&&setTimeout(function(){X&&y()&&b().onLoadingSlow(s,t)},t.loadingTimeout),C[s]=[R.apply(void 0,J),Se()]),ge=C[s],E=ge[0],O=ge[1],[4,E];case 2:return E=Z.sent(),A&&setTimeout(j,t.dedupingInterval),!C[s]||C[s][1]!==O?(A&&y()&&b().onDiscarded(s),[2,!1]):(oe({error:g}),I.error=g,Q=ie[s],!x(Q)&&(O<=Q[0]||O<=Q[1]||Q[1]===0)?(be(),A&&y()&&b().onDiscarded(s),[2,!1]):(a(H.current.data,E)?I.data=H.current.data:I.data=E,a(n.get(s),E)||n.set(s,E),A&&y()&&b().onSuccess(E,s,t),[3,4]));case 3:return G=Z.sent(),j(),b().isPaused()||(oe({error:G}),I.error=G,A&&y()&&(b().onError(G,s,t),(typeof t.shouldRetryOnError=="boolean"&&t.shouldRetryOnError||M(t.shouldRetryOnError)&&t.shouldRetryOnError(G))&&he()&&b().onErrorRetry(G,s,t,L,{retryCount:(Y.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return X=!1,be(),y()&&A&&re(n,s,I.data,I.error,!1),[2,!0]}})})},[s]),ot=h.exports.useCallback(Xe.bind(g,n,function(){return N.current}),[]);if(te(function(){F.current=i,P.current=t}),te(function(){if(!!s){var T=s!==N.current,R=L.bind(g,ye),E=function(y,j,I){ue(W({error:j,isValidating:I},a(H.current.data,y)?g:{data:y}))},O=0,X=function(y){if(y==qe){var j=Date.now();b().revalidateOnFocus&&j>O&&he()&&(O=j+b().focusThrottleInterval,R())}else if(y==Je)b().revalidateOnReconnect&&he()&&R();else if(y==Ke)return L()},Y=Me(s,k,E),A=Me(s,f,X);return D.current=!1,N.current=s,_.current=!0,T&&ue({data:V,error:K,isValidating:ve}),Ve()&&(x(V)||fe?R():yt(R)),function(){D.current=!0,Y(),A()}}},[s,L]),te(function(){var T;function R(){var O=M(p)?p(V):p;O&&T!==-1&&(T=setTimeout(E,O))}function E(){!H.current.error&&(o||b().isVisible())&&(c||b().isOnline())?L(ye).then(R):R()}return R(),function(){T&&(clearTimeout(T),T=-1)}},[p,o,c,L]),h.exports.useDebugValue(V),l&&x(V)&&s)throw F.current=i,P.current=t,D.current=!1,x(K)?L(ye):K;return{mutate:ot,get data(){return me.data=!0,V},get error(){return me.error=!0,K},get isValidating(){return me.isValidating=!0,ve}}};ee.defineProperty(Et,"default",{value:et});var It=Dt(At);const ce=S("h2",{color:"$primaryDark",variants:{size:{small:{fontSize:"$2",fontWeight:"$big"},medium:{fontSize:"$3",fontWeight:"$big"},large:{fontSize:"$5",lineHeight:"24px",fontWeight:"$big"}}},defaultVariants:{size:"medium"}}),Ue=S("div",{width:"fit-content",backgroundColor:"$lightGray",padding:"$2",whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"$3"}),$t=`import databutton as db
import streamlit as st

@db.apps.streamlit(route="/app", name="My App")
def app():
    st.title("My app")

@db.jobs.repeat_every(seconds=60, name="My Job")
def job():
    # Something amazing here
    print("Success!")
`,kt="$ databutton deploy",_t=({localOrCloud:e})=>e==="local"?w(le,{children:[u(ce,{size:"large",children:"Oh, this project seems a bit empty"}),u(z,{children:"In order to add components to your project add one of the following decorators to any of your .py-files and they will magically appear here"}),u(q,{height:"small"}),u(Ue,{children:$t}),u(q,{height:"small"}),w(z,{children:["To learn more about Databutton head over to our"," ",u("a",{href:"https://docs.databutton.com",target:"_blank",rel:"noreferrer",children:"documentation"})]})]}):w(le,{children:[u(ce,{size:"large",children:"Oh, this project seems to not have been deployed yet"}),u(z,{children:"In order to deploy your project, navigate to your project folder and write the following"}),u(q,{height:"small"}),u(Ue,{children:kt}),u(q,{height:"small"}),w(z,{children:["To learn more about Databutton head over to our"," ",u("a",{href:"https://docs.databutton.com",target:"_blank",rel:"noreferrer",children:"documentation"})]})]}),Vt=S("div",{display:"flex",flexFlow:"column",padding:"$2",marginBottom:"200px",variants:{width:{full:{width:"100%"},"one-half":{width:"50%"},"one-third":{width:"33%"},"one-fourth":{width:"25%"}},align:{center:{margin:"0 auto"}}},defaultVariants:{width:"full"}}),de=S(Oe,{borderRadius:"5px",backgroundColor:"purple",padding:"$2",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",width:"100%",variants:{color:{purple:{background:"$darkPurpleGradient",color:"$white"},black:{background:"$blackGradient",color:"$white"},gray:{background:"$lightGray",color:"$primaryDark",boxShadow:"none"}}},defaultVariants:{color:"purple"}}),rt=S("div",{variants:{width:{mobile:{width:"100%"},tablet:{width:"45%"},desktop:{width:"450px"}}}}),Wt=({app:e,onClick:i})=>{var t;return u(rt,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:w(de,{width:"full",css:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center",height:"100px",cursor:"pointer"},onClick:()=>{i(e)},children:[u(ne,{children:(t=e.name)!=null?t:e.filename}),w(ne,{css:{opacity:.7},children:[e.memory," / ",e.cpu," CPU"]})]})})},nt=S("div",{variants:{width:{mobile:{width:"100%"},tablet:{width:"45%"},desktop:{width:"300px"}}}}),Ft=({schedule:e})=>{var i;return u(nt,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:w(de,{color:"black",width:"full",css:{height:"100px",display:"flex",flexFlow:"column",justifyContent:"center",alignItems:"center"},children:[u(ne,{children:(i=e.name)!=null?i:"Unnamed job"}),w(ne,{css:{opacity:.7},children:["Runs every ",e.seconds," seconds"]})]})})},Ne=S("div",{display:"flex",flexWrap:"wrap",gap:"$2"}),jt=S("div",{display:"grid",gridTemplateColumns:"1fr 1fr",height:"90vh"}),Mt=S("div",{height:"100%",width:"100%","&>iframe":{height:"100%",width:"100%"}}),Ut=({projectUrl:e,apps:i,schedules:t})=>{const[n,a]=h.exports.useState(null);return w(jt,{children:[w("div",{children:[u(ce,{size:"medium",children:"Apps"}),i.length>0?u(Ne,{children:i.map(r=>u(Wt,{onClick:a,app:r},r.uid))}):u(rt,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:u(de,{color:"gray",css:{textAlign:"center"},children:u(z,{weight:"big",children:"No apps"})})}),u(q,{}),u(ce,{size:"medium",children:"Jobs"}),t.length>0?u(Ne,{children:t.map(r=>u(Ft,{schedule:r},r.uid))}):u(nt,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:u(de,{color:"gray",css:{textAlign:"center"},children:u(z,{weight:"big",children:"No schedules"})})})]}),u(Mt,{children:n&&w(le,{children:[w(ne,{children:[u("a",{href:`${e}${n.route}`,target:"_blank",rel:"noreferrer",children:u(xe,{children:"Open in separate window"})}),u(xe,{color:"secondary",onClick:()=>a(null),children:"Close app"})]}),u(q,{height:"small"}),u("iframe",{src:`${e}${n.route}`,title:n.name})]})})]})},Pe=S(Oe,{display:"flex",justifyContent:"center",alignItems:"center",gap:"$3"}),Nt=S(Oe,{display:"flex",paddingX:"$3",height:"60px",backgroundColor:"$primaryDark",flexDirection:"row",alignItems:"center",justifyContent:"space-between",transition:"0.2s ease-in",width:"100%"}),Pt=S("a",{color:"$white"}),Lt=({projectName:e})=>w(Nt,{children:[w(Pe,{children:[u("img",{src:"/logo.png",height:"30px",width:"30px",alt:"Databutton"}),e&&u(z,{color:"white",children:e})]}),w(Pe,{children:[u(Pt,{href:"https://docs.databutton.com",target:"_blank",rel:"noreferrer",children:"Documentation"}),u("a",{href:"https://next.databutton.com",target:"_blank",rel:"noreferrer",children:u(xe,{children:"databutton.com"})})]})]}),Le="http://localhost:8000";function zt(){const{data:e}=It(`${Le}/static/artifacts.json`,n=>fetch(n).then(a=>a.json()),{refreshInterval:500}),i=h.exports.useMemo(()=>e?e.streamlit_apps:[],[e]),t=(e==null?void 0:e.streamlit_apps.length)===0&&e.schedules.length===0;return w(le,{children:[u(Lt,{}),u(Vt,{children:t?u(_t,{localOrCloud:"local"}):u(Ut,{projectUrl:Le,apps:i,schedules:e?e.schedules:[]})})]})}ut.createRoot(document.getElementById("root")).render(u(st.StrictMode,{children:u(zt,{})}));
