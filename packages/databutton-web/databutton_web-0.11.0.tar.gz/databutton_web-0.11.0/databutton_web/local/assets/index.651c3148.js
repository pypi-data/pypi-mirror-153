import{r as v,s as D,B as Ee,j as l,a as E,R as te,T as be,S as Ve,F as Pe,b as ge,c as ot,d as ut}from"./index.bb2e142b.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Le(e,a,t,n){function i(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function f(c){try{o(n.next(c))}catch(h){s(h)}}function p(c){try{o(n.throw(c))}catch(h){s(h)}}function o(c){c.done?r(c.value):i(c.value).then(f,p)}o((n=n.apply(e,a||[])).next())})}function ze(e,a){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,i,r,s;return s={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(o){return function(c){return p([o,c])}}function p(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(r=o[0]&2?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[o[0]&2,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){t.label=o[1];break}if(o[0]===6&&t.label<r[1]){t.label=r[1],r=o;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(o);break}r[2]&&t.ops.pop(),t.trys.pop();continue}o=a.call(e,t)}catch(c){o=[6,c],i=0}finally{n=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var $=function(){},g=$(),Y=Object,x=function(e){return e===g},U=function(e){return typeof e=="function"},F=function(e,a){return Y.assign({},e,a)},Se="undefined",Te=function(){return typeof window!=Se},st=function(){return typeof document!=Se},lt=function(){return Te()&&typeof window.requestAnimationFrame!=Se},oe=new WeakMap,ct=0,re=function(e){var a=typeof e,t=e&&e.constructor,n=t==Date,i,r;if(Y(e)===e&&!n&&t!=RegExp){if(i=oe.get(e),i)return i;if(i=++ct+"~",oe.set(e,i),t==Array){for(i="@",r=0;r<e.length;r++)i+=re(e[r])+",";oe.set(e,i)}if(t==Y){i="#";for(var s=Y.keys(e).sort();!x(r=s.pop());)x(e[r])||(i+=r+":"+re(e[r])+",");oe.set(e,i)}}else i=n?e.toJSON():a=="symbol"?e.toString():a=="string"?JSON.stringify(e):""+e;return i},we=!0,ft=function(){return we},He=Te(),De=st(),xe=He&&window.addEventListener?window.addEventListener.bind(window):$,dt=De?document.addEventListener.bind(document):$,ye=He&&window.removeEventListener?window.removeEventListener.bind(window):$,vt=De?document.removeEventListener.bind(document):$,ht=function(){var e=De&&document.visibilityState;return x(e)||e!=="hidden"},pt=function(e){return dt("visibilitychange",e),xe("focus",e),function(){vt("visibilitychange",e),ye("focus",e)}},mt=function(e){var a=function(){we=!0,e()},t=function(){we=!1};return xe("online",a),xe("offline",t),function(){ye("online",a),ye("offline",t)}},bt={isOnline:ft,isVisible:ht},gt={initFocus:pt,initReconnect:mt},se=!Te()||"Deno"in window,wt=function(e){return lt()?window.requestAnimationFrame(e):setTimeout(e,1)},Z=se?v.exports.useEffect:v.exports.useLayoutEffect,pe=typeof navigator!="undefined"&&navigator.connection,We=!se&&pe&&(["slow-2g","2g"].includes(pe.effectiveType)||pe.saveData),Be=function(e){if(U(e))try{e=e()}catch{e=""}var a=[].concat(e);e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?re(e):"";var t=e?"$swr$"+e:"";return[e,a,t]},z=new WeakMap,Ge=0,qe=1,Je=2,ee=function(e,a,t,n,i,r,s){s===void 0&&(s=!0);var f=z.get(e),p=f[0],o=f[1],c=f[3],h=p[a],d=o[a];if(s&&d)for(var k=0;k<d.length;++k)d[k](t,n,i);return r&&(delete c[a],h&&h[0])?h[0](Je).then(function(){return e.get(a)}):e.get(a)},xt=0,Re=function(){return++xt},Ke=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return Le(void 0,void 0,void 0,function(){var t,n,i,r,s,f,p,o,c,h,d,k,ne,y,m,u,G,N,V,O,j;return ze(this,function(_){switch(_.label){case 0:if(t=e[0],n=e[1],i=e[2],r=e[3],s=typeof r=="boolean"?{revalidate:r}:r||{},f=x(s.populateCache)?!0:s.populateCache,p=s.revalidate!==!1,o=s.rollbackOnError!==!1,c=s.optimisticData,h=Be(n),d=h[0],k=h[2],!d)return[2];if(ne=z.get(t),y=ne[2],e.length<3)return[2,ee(t,d,t.get(d),g,g,p,!0)];if(m=i,G=Re(),y[d]=[G,0],N=!x(c),V=t.get(d),N&&(O=U(c)?c(V):c,t.set(d,O),ee(t,d,O)),U(m))try{m=m(t.get(d))}catch(P){u=P}return m&&U(m.then)?[4,m.catch(function(P){u=P})]:[3,2];case 1:if(m=_.sent(),G!==y[d][0]){if(u)throw u;return[2,m]}else u&&N&&o&&(f=!0,m=V,t.set(d,V));_.label=2;case 2:return f&&(u||(U(f)&&(m=f(m,V)),t.set(d,m)),t.set(k,F(t.get(k),{error:u}))),y[d][1]=Re(),[4,ee(t,d,m,u,g,p,!!f)];case 3:if(j=_.sent(),u)throw u;return[2,f?j:m]}})})},Fe=function(e,a){for(var t in e)e[t][0]&&e[t][0](a)},Xe=function(e,a){if(!z.has(e)){var t=F(gt,a),n={},i=Ke.bind(g,e),r=$;if(z.set(e,[n,{},{},{},i]),!se){var s=t.initFocus(setTimeout.bind(g,Fe.bind(g,n,Ge))),f=t.initReconnect(setTimeout.bind(g,Fe.bind(g,n,qe)));r=function(){s&&s(),f&&f(),z.delete(e)}}return[e,i,r]}return[e,z.get(e)[4]]},yt=function(e,a,t,n,i){var r=t.errorRetryCount,s=i.retryCount,f=~~((Math.random()+.5)*(1<<(s<8?s:8)))*t.errorRetryInterval;!x(r)&&s>r||setTimeout(n,f,i)},Qe=Xe(new Map),Ye=Qe[0],Rt=Qe[1],Ze=F({onLoadingSlow:$,onSuccess:$,onError:$,onErrorRetry:yt,onDiscarded:$,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:We?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:We?5e3:3e3,compare:function(e,a){return re(e)==re(a)},isPaused:function(){return!1},cache:Ye,mutate:Rt,fallback:{}},bt),et=function(e,a){var t=F(e,a);if(a){var n=e.use,i=e.fallback,r=a.use,s=a.fallback;n&&r&&(t.use=n.concat(r)),i&&s&&(t.fallback=F(i,s))}return t},Ce=v.exports.createContext({}),Ct=function(e){var a=e.value,t=et(v.exports.useContext(Ce),a),n=a&&a.provider,i=v.exports.useState(function(){return n?Xe(n(t.cache||Ye),a):g})[0];return i&&(t.cache=i[0],t.mutate=i[1]),Z(function(){return i?i[2]:g},[]),v.exports.createElement(Ce.Provider,F(e,{value:t}))},Et=function(e,a){var t=v.exports.useState({})[1],n=v.exports.useRef(e),i=v.exports.useRef({data:!1,error:!1,isValidating:!1}),r=v.exports.useCallback(function(s){var f=!1,p=n.current;for(var o in s){var c=o;p[c]!==s[c]&&(p[c]=s[c],i.current[c]&&(f=!0))}f&&!a.current&&t({})},[]);return Z(function(){n.current=e}),[n,i.current,r]},St=function(e){return U(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}]},Tt=function(){return F(Ze,v.exports.useContext(Ce))},Dt=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=Tt(),r=St(t),s=r[0],f=r[1],p=r[2],o=et(i,p),c=e,h=o.use;if(h)for(var d=h.length;d-- >0;)c=h[d](c);return c(s,f||o.fetcher,o)}},_e=function(e,a,t){var n=a[e]||(a[e]=[]);return n.push(t),function(){var i=n.indexOf(t);i>=0&&(n[i]=n[n.length-1],n.pop())}},me={dedupe:!0},Ot=function(e,a,t){var n=t.cache,i=t.compare,r=t.fallbackData,s=t.suspense,f=t.revalidateOnMount,p=t.refreshInterval,o=t.refreshWhenHidden,c=t.refreshWhenOffline,h=z.get(n),d=h[0],k=h[1],ne=h[2],y=h[3],m=Be(e),u=m[0],G=m[1],N=m[2],V=v.exports.useRef(!1),O=v.exports.useRef(!1),j=v.exports.useRef(u),_=v.exports.useRef(a),P=v.exports.useRef(t),b=function(){return P.current},le=function(){return b().isVisible()&&b().isOnline()},ae=function(S){return n.set(N,F(n.get(N),S))},Oe=n.get(u),nt=x(r)?t.fallback[u]:r,W=x(Oe)?nt:Oe,Ae=n.get(N)||{},q=Ae.error,Ie=!V.current,$e=function(){return Ie&&!x(f)?f:b().isPaused()?!1:s?x(W)?!1:t.revalidateIfStale:x(W)||t.revalidateIfStale},at=function(){return!u||!a?!1:Ae.isValidating?!0:Ie&&$e()},ce=at(),fe=Et({data:W,error:q,isValidating:ce},O),H=fe[0],de=fe[1],ie=fe[2],L=v.exports.useCallback(function(S){return Le(void 0,void 0,void 0,function(){var R,C,T,J,K,A,w,M,I,ve,X,B,he;return ze(this,function(Q){switch(Q.label){case 0:if(R=_.current,!u||!R||O.current||b().isPaused())return[2,!1];J=!0,K=S||{},A=!y[u]||!K.dedupe,w=function(){return!O.current&&u===j.current&&V.current},M=function(){var ke=y[u];ke&&ke[1]===T&&delete y[u]},I={isValidating:!1},ve=function(){ae({isValidating:!1}),w()&&ie(I)},ae({isValidating:!0}),ie({isValidating:!0}),Q.label=1;case 1:return Q.trys.push([1,3,,4]),A&&(ee(n,u,H.current.data,H.current.error,!0),t.loadingTimeout&&!n.get(u)&&setTimeout(function(){J&&w()&&b().onLoadingSlow(u,t)},t.loadingTimeout),y[u]=[R.apply(void 0,G),Re()]),he=y[u],C=he[0],T=he[1],[4,C];case 2:return C=Q.sent(),A&&setTimeout(M,t.dedupingInterval),!y[u]||y[u][1]!==T?(A&&w()&&b().onDiscarded(u),[2,!1]):(ae({error:g}),I.error=g,X=ne[u],!x(X)&&(T<=X[0]||T<=X[1]||X[1]===0)?(ve(),A&&w()&&b().onDiscarded(u),[2,!1]):(i(H.current.data,C)?I.data=H.current.data:I.data=C,i(n.get(u),C)||n.set(u,C),A&&w()&&b().onSuccess(C,u,t),[3,4]));case 3:return B=Q.sent(),M(),b().isPaused()||(ae({error:B}),I.error=B,A&&w()&&(b().onError(B,u,t),(typeof t.shouldRetryOnError=="boolean"&&t.shouldRetryOnError||U(t.shouldRetryOnError)&&t.shouldRetryOnError(B))&&le()&&b().onErrorRetry(B,u,t,L,{retryCount:(K.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return J=!1,ve(),w()&&A&&ee(n,u,I.data,I.error,!1),[2,!0]}})})},[u]),it=v.exports.useCallback(Ke.bind(g,n,function(){return j.current}),[]);if(Z(function(){_.current=a,P.current=t}),Z(function(){if(!!u){var S=u!==j.current,R=L.bind(g,me),C=function(w,M,I){ie(F({error:M,isValidating:I},i(H.current.data,w)?g:{data:w}))},T=0,J=function(w){if(w==Ge){var M=Date.now();b().revalidateOnFocus&&M>T&&le()&&(T=M+b().focusThrottleInterval,R())}else if(w==qe)b().revalidateOnReconnect&&le()&&R();else if(w==Je)return L()},K=_e(u,k,C),A=_e(u,d,J);return O.current=!1,j.current=u,V.current=!0,S&&ie({data:W,error:q,isValidating:ce}),$e()&&(x(W)||se?R():wt(R)),function(){O.current=!0,K(),A()}}},[u,L]),Z(function(){var S;function R(){var T=U(p)?p(W):p;T&&S!==-1&&(S=setTimeout(C,T))}function C(){!H.current.error&&(o||b().isVisible())&&(c||b().isOnline())?L(me).then(R):R()}return R(),function(){S&&(clearTimeout(S),S=-1)}},[p,o,c,L]),v.exports.useDebugValue(W),s&&x(W)&&u)throw _.current=a,P.current=t,O.current=!1,x(q)?L(me):q;return{mutate:it,get data(){return de.data=!0,W},get error(){return de.error=!0,q},get isValidating(){return de.isValidating=!0,ce}}};Y.defineProperty(Ct,"default",{value:Ze});var At=Dt(Ot);const It=D("div",{display:"flex",flexFlow:"column",padding:"$2",marginBottom:"200px",variants:{width:{full:{width:"100%"},"one-half":{width:"50%"},"one-third":{width:"33%"},"one-fourth":{width:"25%"}},align:{center:{margin:"0 auto"}}},defaultVariants:{width:"full"}}),ue=D(Ee,{borderRadius:"5px",backgroundColor:"purple",padding:"$2",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",width:"100%",variants:{color:{purple:{background:"$darkPurpleGradient",color:"$white"},black:{background:"$blackGradient",color:"$white"},gray:{background:"$lightGray",color:"$primaryDark",boxShadow:"none"}}},defaultVariants:{color:"purple"}}),Me=D("h2",{color:"$primaryDark",variants:{size:{small:{fontSize:"$2",fontWeight:"$big"},medium:{fontSize:"$3",fontWeight:"$big"},large:{fontSize:"$5",lineHeight:"24px",fontWeight:"$big"}}},defaultVariants:{size:"medium"}}),tt=D("div",{variants:{width:{mobile:{width:"100%"},tablet:{width:"45%"},desktop:{width:"450px"}}}}),$t=({app:e,onClick:a})=>{var t;return l(tt,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:E(ue,{width:"full",css:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center",height:"100px",cursor:"pointer"},onClick:()=>{a(e)},children:[l(te,{children:(t=e.name)!=null?t:e.filename}),E(te,{css:{opacity:.7},children:[e.memory," / ",e.cpu," CPU"]})]})})},rt=D("div",{variants:{width:{mobile:{width:"100%"},tablet:{width:"45%"},desktop:{width:"300px"}}}}),kt=({schedule:e})=>{var a;return l(rt,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:E(ue,{color:"black",width:"full",css:{height:"100px",display:"flex",flexFlow:"column",justifyContent:"center",alignItems:"center"},children:[l(te,{children:(a=e.name)!=null?a:"Unnamed job"}),E(te,{css:{opacity:.7},children:["Runs every ",e.seconds," seconds"]})]})})},Ue=D("div",{display:"flex",flexWrap:"wrap",gap:"$2"}),Vt=D("div",{display:"grid",gridTemplateColumns:"1fr 1fr",height:"90vh"}),Wt=D("div",{height:"100%",width:"100%","&>iframe":{height:"100%",width:"100%"}}),Ft=({projectUrl:e,apps:a,schedules:t})=>{const[n,i]=v.exports.useState(null);return E(Vt,{children:[E("div",{children:[l(Me,{size:"medium",children:"Apps"}),a.length>0?l(Ue,{children:a.map(r=>l($t,{onClick:i,app:r},r.uid))}):l(tt,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:l(ue,{color:"gray",css:{textAlign:"center"},children:l(be,{weight:"big",children:"No apps"})})}),l(Ve,{}),l(Me,{size:"medium",children:"Jobs"}),t.length>0?l(Ue,{children:t.map(r=>l(kt,{schedule:r},r.uid))}):l(rt,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:l(ue,{color:"gray",css:{textAlign:"center"},children:l(be,{weight:"big",children:"No schedules"})})})]}),l(Wt,{children:n&&E(Pe,{children:[E(te,{children:[l("a",{href:`${e}${n.route}`,target:"_blank",rel:"noreferrer",children:l(ge,{children:"Open in separate window"})}),l(ge,{color:"secondary",onClick:()=>i(null),children:"Close app"})]}),l(Ve,{height:"small"}),l("iframe",{src:`${e}${n.route}`,title:n.name})]})})]})},Ne=D(Ee,{display:"flex",justifyContent:"center",alignItems:"center",gap:"$3"}),_t=D(Ee,{display:"flex",paddingX:"$3",height:"60px",backgroundColor:"$primaryDark",flexDirection:"row",alignItems:"center",justifyContent:"space-between",transition:"0.2s ease-in",width:"100%"}),Mt=D("a",{color:"$white"}),Ut=({projectName:e})=>E(_t,{children:[E(Ne,{children:[l("img",{src:"/logo.png",height:"30px",width:"30px",alt:"Databutton"}),e&&l(be,{color:"white",children:e})]}),E(Ne,{children:[l(Mt,{href:"https://docs.databutton.com",target:"_blank",rel:"noreferrer",children:"Documentation"}),l("a",{href:"https://next.databutton.com",target:"_blank",rel:"noreferrer",children:l(ge,{children:"databutton.com"})})]})]}),je="http://localhost:8000";function Nt(){const{data:e}=At(`${je}/static/artifacts.json`,t=>fetch(t).then(n=>n.json()),{refreshInterval:500}),a=v.exports.useMemo(()=>e?e.streamlit_apps:[],[e]);return E(Pe,{children:[l(Ut,{}),l(It,{children:l(Ft,{projectUrl:je,apps:a,schedules:e?e.schedules:[]})})]})}ot.createRoot(document.getElementById("root")).render(l(ut.StrictMode,{children:l(Nt,{})}));
